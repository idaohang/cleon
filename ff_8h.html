<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CLEON: fs/FatFs/ff.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLEON
   &#160;<span id="projectnumber">Version 1</span>
   </div>
   <div id="projectbrief">Cloud-Offloaded GPS Receiver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ff_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ff.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="integer_8h_source.html">integer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ffconf_8h_source.html">ffconf.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ff.h:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h__incl.png" border="0" usemap="#fs_2_fat_fs_2ff_8h" alt=""/></div>
<map name="fs_2_fat_fs_2ff_8h" id="fs_2_fat_fs_2ff_8h">
<area shape="rect" id="node3" href="integer_8h.html" title="integer.h" alt="" coords="5,80,77,107"/><area shape="rect" id="node5" href="ffconf_8h.html" title="ffconf.h" alt="" coords="102,80,164,107"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h__dep__incl.png" border="0" usemap="#fs_2_fat_fs_2ff_8hdep" alt=""/></div>
<map name="fs_2_fat_fs_2ff_8hdep" id="fs_2_fat_fs_2ff_8hdep">
<area shape="rect" id="node3" href="ccsbcs_8c.html" title="fs/FatFs/ccsbcs.c" alt="" coords="1411,80,1537,107"/><area shape="rect" id="node5" href="fs__define_8h.html" title="File system definition." alt="" coords="1563,80,1661,107"/><area shape="rect" id="node7" href="app__log_8c.html" title="Logging CLEON data." alt="" coords="5,155,107,181"/><area shape="rect" id="node9" href="app__usb_8c.html" title="Communication via USB." alt="" coords="132,155,239,181"/><area shape="rect" id="node11" href="diskio_8c.html" title="fs/FatFs/diskio.c" alt="" coords="263,155,381,181"/><area shape="rect" id="node13" href="ff_8c.html" title="fs/FatFs/ff.c" alt="" coords="407,155,497,181"/><area shape="rect" id="node15" href="fs__init_8c.html" title="Initializing file system." alt="" coords="522,155,603,181"/><area shape="rect" id="node17" href="hal__adc_8c.html" title="ADC configuration." alt="" coords="628,155,727,181"/><area shape="rect" id="node19" href="hal__dma_8c.html" title="DMA configuration." alt="" coords="751,155,853,181"/><area shape="rect" id="node21" href="hal__flash_8c.html" title="FLASH configuration." alt="" coords="878,155,983,181"/><area shape="rect" id="node23" href="hal__gpio_8c.html" title="GPIO configuration." alt="" coords="1007,155,1109,181"/><area shape="rect" id="node25" href="hal__init_8c.html" title="Initializing HAL." alt="" coords="1134,155,1228,181"/><area shape="rect" id="node27" href="hal__pmm_8c.html" title="PMM configuration." alt="" coords="1253,155,1360,181"/><area shape="rect" id="node29" href="hal__rtc_8c.html" title="RTC configuration." alt="" coords="1384,155,1477,181"/><area shape="rect" id="node31" href="hal__spi_8c.html" title="SPI configuration." alt="" coords="1502,155,1596,181"/><area shape="rect" id="node33" href="hal__timer_8c.html" title="timer configuration" alt="" coords="1621,155,1728,181"/><area shape="rect" id="node35" href="hal__uart_8c.html" title="UART configuration." alt="" coords="1753,155,1852,181"/><area shape="rect" id="node37" href="hal__ucs_8c.html" title="Universal clock system configuration." alt="" coords="1877,155,1976,181"/><area shape="rect" id="node39" href="hal__wdt_8c.html" title="Watchdog timer configuration." alt="" coords="2000,155,2099,181"/><area shape="rect" id="node41" href="main_8c.html" title="Main entry for the CLEO sensor board firmware." alt="" coords="2123,155,2184,181"/><area shape="rect" id="node43" href="sys__flash_8c.html" title="FLASH related functions." alt="" coords="2209,155,2321,181"/><area shape="rect" id="node45" href="sys__gps_8c.html" title="GPS related functions." alt="" coords="2347,155,2453,181"/><area shape="rect" id="node47" href="sys__init_8c.html" title="Initializing the system." alt="" coords="2478,155,2580,181"/><area shape="rect" id="node49" href="sys__mcu_8c.html" title="MCU related functions." alt="" coords="2605,155,2715,181"/><area shape="rect" id="node51" href="sys__mmc_8c.html" title="Micro SD card related functions." alt="" coords="2740,155,2855,181"/><area shape="rect" id="node53" href="sys__power_8c.html" title="Power related functions." alt="" coords="2879,155,2999,181"/><area shape="rect" id="node55" href="sys__sensors_8c.html" title="Sensors related functions." alt="" coords="3023,155,3155,181"/><area shape="rect" id="node57" href="sys__usb_8c.html" title="USB related functions." alt="" coords="3180,155,3287,181"/></map>
</div>
</div>
<p><a href="ff_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_l.html">FIL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_d_i_r.html">DIR</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a749228947bc890224b8bd5de6e11faa3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a749228947bc890224b8bd5de6e11faa3">_FATFS</a>&#160;&#160;&#160;4004	/* Revision ID */</td></tr>
<tr class="separator:a749228947bc890224b8bd5de6e11faa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6577ed2f95527745bf4d27c53488b9a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a6577ed2f95527745bf4d27c53488b9a7">LD2PD</a>(vol)&#160;&#160;&#160;(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(vol)	        /* Each logical drive is bound to the same physical drive number */</td></tr>
<tr class="separator:a6577ed2f95527745bf4d27c53488b9a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc4a9aefaf2588bdd7565549f5d91e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aadc4a9aefaf2588bdd7565549f5d91e7">LD2PT</a>(vol)&#160;&#160;&#160;0			        /* Always mounts the 1st partition or in SFD */</td></tr>
<tr class="separator:aadc4a9aefaf2588bdd7565549f5d91e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae936e4c15227768f7da4e0951def89c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae936e4c15227768f7da4e0951def89c8">_T</a>(x)&#160;&#160;&#160;x</td></tr>
<tr class="separator:ae936e4c15227768f7da4e0951def89c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3232964568d17bb4a1af30f9db826ce2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3232964568d17bb4a1af30f9db826ce2">_TEXT</a>(x)&#160;&#160;&#160;x</td></tr>
<tr class="separator:a3232964568d17bb4a1af30f9db826ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970cdd8970a3a94967ad64cfc5d4c161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a970cdd8970a3a94967ad64cfc5d4c161">f_eof</a>(fp)&#160;&#160;&#160;(((fp)-&gt;fptr == (fp)-&gt;fsize) ? 1 : 0)</td></tr>
<tr class="separator:a970cdd8970a3a94967ad64cfc5d4c161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cbdabeed318802cf0e9db6671a33b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a25cbdabeed318802cf0e9db6671a33b7">f_error</a>(fp)&#160;&#160;&#160;(((fp)-&gt;flag &amp; <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) ? 1 : 0)</td></tr>
<tr class="separator:a25cbdabeed318802cf0e9db6671a33b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1daca7ce13cdc277e42185f7f9124f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a5e1daca7ce13cdc277e42185f7f9124f">f_tell</a>(fp)&#160;&#160;&#160;((fp)-&gt;fptr)</td></tr>
<tr class="separator:a5e1daca7ce13cdc277e42185f7f9124f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26f33722c5bf1aa3cd6f0290a83eb2bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a26f33722c5bf1aa3cd6f0290a83eb2bc">f_size</a>(fp)&#160;&#160;&#160;((fp)-&gt;fsize)</td></tr>
<tr class="separator:a26f33722c5bf1aa3cd6f0290a83eb2bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59adc4c82490d23754cd39c2fb99b0da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a>&#160;&#160;&#160;(-1)</td></tr>
<tr class="separator:a59adc4c82490d23754cd39c2fb99b0da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4f3530ff03abbd979b072536e72290"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a1f4f3530ff03abbd979b072536e72290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5dd686b10f84c2a2b3954957a5979a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0c5dd686b10f84c2a2b3954957a5979a">FA_OPEN_EXISTING</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a0c5dd686b10f84c2a2b3954957a5979a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b47fe8126573b17752a9a242b76b9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>&#160;&#160;&#160;0x80</td></tr>
<tr class="separator:ad3b47fe8126573b17752a9a242b76b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa366963220c89b882c0361794020c14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:afa366963220c89b882c0361794020c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417bb1babd1785fd181a806b5613eba3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:a417bb1babd1785fd181a806b5613eba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba4546b131dea4b24727fa20a80e29f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:afba4546b131dea4b24727fa20a80e29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b01553029920ac0468912b4bcb16c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="separator:a17b01553029920ac0468912b4bcb16c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b7d5223f84df91c306ffbff536fae4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="separator:ac4b7d5223f84df91c306ffbff536fae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b2962e3616a1e9eb709d95f4c75c67c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>&#160;&#160;&#160;0x40</td></tr>
<tr class="separator:a5b2962e3616a1e9eb709d95f4c75c67c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab755aa1b4f81f4aabee4a5d4738cfb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:aab755aa1b4f81f4aabee4a5d4738cfb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef90a36d99edfc0138a2155a17a79b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a7ef90a36d99edfc0138a2155a17a79b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac63e0796095a789cefdbc3c3c676c9ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ac63e0796095a789cefdbc3c3c676c9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add6d85d1e7a02b4f6188783ef91a5f1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>&#160;&#160;&#160;0x01	/* Read only */</td></tr>
<tr class="separator:add6d85d1e7a02b4f6188783ef91a5f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90c4c921c1955fd407d8bbf17f1674e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a>&#160;&#160;&#160;0x02	/* Hidden */</td></tr>
<tr class="separator:aa90c4c921c1955fd407d8bbf17f1674e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f25d5c17b5a3a6397b3398add8cdc15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a>&#160;&#160;&#160;0x04	/* System */</td></tr>
<tr class="separator:a1f25d5c17b5a3a6397b3398add8cdc15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cfae62dabae0a54809e43b36685ce7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a5cfae62dabae0a54809e43b36685ce7c">AM_VOL</a>&#160;&#160;&#160;0x08	/* Volume label */</td></tr>
<tr class="separator:a5cfae62dabae0a54809e43b36685ce7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91161ef62e0e85ba3c2876d3d339473d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a91161ef62e0e85ba3c2876d3d339473d">AM_LFN</a>&#160;&#160;&#160;0x0F	/* LFN entry */</td></tr>
<tr class="separator:a91161ef62e0e85ba3c2876d3d339473d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9db44e978ed6c13b641e092d4cd7d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>&#160;&#160;&#160;0x10	/* Directory */</td></tr>
<tr class="separator:a3a9db44e978ed6c13b641e092d4cd7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8174d00798e34e7c9e95898cb9e1a09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>&#160;&#160;&#160;0x20	/* Archive */</td></tr>
<tr class="separator:ae8174d00798e34e7c9e95898cb9e1a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa78fd6b130faaca4e115602869b57c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aefa78fd6b130faaca4e115602869b57c">AM_MASK</a>&#160;&#160;&#160;0x3F	/* Mask of defined bits */</td></tr>
<tr class="separator:aefa78fd6b130faaca4e115602869b57c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee297a9011164cf485a4df2a72758b08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>&#160;&#160;&#160;0xFFFFFFFF</td></tr>
<tr class="separator:aee297a9011164cf485a4df2a72758b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398519bb08da6457e62567d1f0b567e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(ptr)&#160;&#160;&#160;(<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)&lt;&lt;8)|(<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr))</td></tr>
<tr class="separator:a398519bb08da6457e62567d1f0b567e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4690304ddc975516f7dc02575c96e34e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(ptr)&#160;&#160;&#160;(<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+3)&lt;&lt;24)|((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+2)&lt;&lt;16)|((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)&lt;&lt;8)|*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr))</td></tr>
<tr class="separator:a4690304ddc975516f7dc02575c96e34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95ceb4c25b216e71baa7102939edfd0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(ptr, val)&#160;&#160;&#160;*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(val)&gt;&gt;8)</td></tr>
<tr class="separator:a95ceb4c25b216e71baa7102939edfd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5aba973d95ac5843b80aa7379cdd66"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(ptr, val)&#160;&#160;&#160;*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(val)&gt;&gt;8); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+2)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(val)&gt;&gt;16); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+3)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(val)&gt;&gt;24)</td></tr>
<tr class="separator:abf5aba973d95ac5843b80aa7379cdd66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a03bdb8ce5895c7e261aadc2529637546"><td class="memItemLeft" align="right" valign="top">typedef char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></td></tr>
<tr class="separator:a03bdb8ce5895c7e261aadc2529637546"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a49d0171ecbd362cda5680a0d360db44c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> { <br/>
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> = 0, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45">FR_NOT_READY</a>, 
<br/>
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>, 
<br/>
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b">FR_WRITE_PROTECTED</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>, 
<br/>
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d">FR_NOT_ENABLED</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463">FR_NO_FILESYSTEM</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca">FR_MKFS_ABORTED</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4">FR_TIMEOUT</a>, 
<br/>
&#160;&#160;<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7">FR_LOCKED</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>, 
<a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6">FR_INVALID_PARAMETER</a>
<br/>
 }</td></tr>
<tr class="separator:a49d0171ecbd362cda5680a0d360db44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad995e9683ac193923812fbb250ba0acb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ad995e9683ac193923812fbb250ba0acb">f_mount</a> (<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *)</td></tr>
<tr class="separator:ad995e9683ac193923812fbb250ba0acb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf2fcce74586a7af2a86d0543de6cdef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#acf2fcce74586a7af2a86d0543de6cdef">f_open</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)</td></tr>
<tr class="separator:acf2fcce74586a7af2a86d0543de6cdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0df1d597f92e2e6482e3a8f5c9b136"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a9f0df1d597f92e2e6482e3a8f5c9b136">f_read</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, void *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *)</td></tr>
<tr class="separator:a9f0df1d597f92e2e6482e3a8f5c9b136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a2d3b1cec2ede839b1c70397e6f1f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ac9a2d3b1cec2ede839b1c70397e6f1f8">f_lseek</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)</td></tr>
<tr class="separator:ac9a2d3b1cec2ede839b1c70397e6f1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004f8ebf5a01c5c7065292cc4545bc38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a004f8ebf5a01c5c7065292cc4545bc38">f_close</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:a004f8ebf5a01c5c7065292cc4545bc38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7608f0d3c152bcd2950704d881e41b8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a7608f0d3c152bcd2950704d881e41b8c">f_opendir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *)</td></tr>
<tr class="separator:a7608f0d3c152bcd2950704d881e41b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84f86ce841a3facb95060e0bdefd5fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae84f86ce841a3facb95060e0bdefd5fb">f_readdir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *)</td></tr>
<tr class="separator:ae84f86ce841a3facb95060e0bdefd5fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee04d91ad57ffe5a66a6a0e0b16fdfe6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aee04d91ad57ffe5a66a6a0e0b16fdfe6">f_stat</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *)</td></tr>
<tr class="separator:aee04d91ad57ffe5a66a6a0e0b16fdfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02e0c59a61ad5954bc9b566fe8a79b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#af02e0c59a61ad5954bc9b566fe8a79b8">f_write</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, const void *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *)</td></tr>
<tr class="separator:af02e0c59a61ad5954bc9b566fe8a79b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f50eeafdd73abb2f4ad033ce6cabb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a08f50eeafdd73abb2f4ad033ce6cabb0">f_getfree</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **)</td></tr>
<tr class="separator:a08f50eeafdd73abb2f4ad033ce6cabb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d002c2c9b726151b9c1a4ad742c41d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a29d002c2c9b726151b9c1a4ad742c41d">f_truncate</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:a29d002c2c9b726151b9c1a4ad742c41d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ba7b156902f7678b3344f1e5bc5e88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae3ba7b156902f7678b3344f1e5bc5e88">f_sync</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:ae3ba7b156902f7678b3344f1e5bc5e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab68be1620730d7ed482d209f417b40b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aab68be1620730d7ed482d209f417b40b">f_unlink</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *)</td></tr>
<tr class="separator:aab68be1620730d7ed482d209f417b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13452975056874fbec616433db001bf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a13452975056874fbec616433db001bf9">f_mkdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *)</td></tr>
<tr class="separator:a13452975056874fbec616433db001bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae048494f6094a8254b40614f11e76048"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#ae048494f6094a8254b40614f11e76048">f_chmod</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)</td></tr>
<tr class="separator:ae048494f6094a8254b40614f11e76048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a748ed6ec723321a5c5e35e7112ac531c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a748ed6ec723321a5c5e35e7112ac531c">f_utime</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *)</td></tr>
<tr class="separator:a748ed6ec723321a5c5e35e7112ac531c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0670638c6a93e143b7a8b196ab361c83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0670638c6a93e143b7a8b196ab361c83">f_rename</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *)</td></tr>
<tr class="separator:a0670638c6a93e143b7a8b196ab361c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add8af30ee0ccabb1194bcc57e34aca09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#add8af30ee0ccabb1194bcc57e34aca09">f_chdrive</a> (<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)</td></tr>
<tr class="separator:add8af30ee0ccabb1194bcc57e34aca09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e1bc23ae1f0d1475671b3c3a85f1eb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a8e1bc23ae1f0d1475671b3c3a85f1eb9">f_chdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *)</td></tr>
<tr class="separator:a8e1bc23ae1f0d1475671b3c3a85f1eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4251a19a74e3bd6429fde4c1db96d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0a4251a19a74e3bd6429fde4c1db96d4">f_getcwd</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)</td></tr>
<tr class="separator:a0a4251a19a74e3bd6429fde4c1db96d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db6acd9f9fbcb22f041d1f33304e7e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a7db6acd9f9fbcb22f041d1f33304e7e2">f_forward</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>(*)(const <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>), <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *)</td></tr>
<tr class="separator:a7db6acd9f9fbcb22f041d1f33304e7e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec3ab4178a070d6ef2ba3d3e94b022aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aec3ab4178a070d6ef2ba3d3e94b022aa">f_mkfs</a> (<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)</td></tr>
<tr class="separator:aec3ab4178a070d6ef2ba3d3e94b022aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7701743efb836f599692e224063bc82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#af7701743efb836f599692e224063bc82">f_fdisk</a> (<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>, const <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>[], void *)</td></tr>
<tr class="separator:af7701743efb836f599692e224063bc82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6f28130325afd1c1ee5a62da837042"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a6b6f28130325afd1c1ee5a62da837042">f_putc</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>, <a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:a6b6f28130325afd1c1ee5a62da837042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb521b6e0831ac577eb2772bd8ba44a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#acb521b6e0831ac577eb2772bd8ba44a3">f_puts</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, <a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:acb521b6e0831ac577eb2772bd8ba44a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0af8ac748b025f644daabe5ce5609d8b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a0af8ac748b025f644daabe5ce5609d8b">f_printf</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *,...)</td></tr>
<tr class="separator:a0af8ac748b025f644daabe5ce5609d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5af8207185e606397cb9077b61ab604"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#af5af8207185e606397cb9077b61ab604">f_gets</a> (<a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *, int, <a class="el" href="struct_f_i_l.html">FIL</a> *)</td></tr>
<tr class="separator:af5af8207185e606397cb9077b61ab604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b5eab639d7574b5e51ae3577da95c83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83">scan_files</a> (char *path)</td></tr>
<tr class="separator:a5b5eab639d7574b5e51ae3577da95c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af58b536abfd30f77213f4ecaf2ac52f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a> (void)</td></tr>
<tr class="separator:af58b536abfd30f77213f4ecaf2ac52f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4ff5aa2dbdb4826115a930517d52c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#aba4ff5aa2dbdb4826115a930517d52c1">ff_convert</a> (<a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)</td></tr>
<tr class="separator:aba4ff5aa2dbdb4826115a930517d52c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb1da5baa3afc7b9d8e1c79c843b9b06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8h.html#afb1da5baa3afc7b9d8e1c79c843b9b06">ff_wtoupper</a> (<a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>)</td></tr>
<tr class="separator:afb1da5baa3afc7b9d8e1c79c843b9b06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a749228947bc890224b8bd5de6e11faa3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _FATFS&#160;&#160;&#160;4004	/* Revision ID */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00018">18</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae936e4c15227768f7da4e0951def89c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _T</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;x</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00061">61</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3232964568d17bb4a1af30f9db826ce2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _TEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;x</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00062">62</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae8174d00798e34e7c9e95898cb9e1a09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_ARC&#160;&#160;&#160;0x20	/* Archive */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00279">279</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a9db44e978ed6c13b641e092d4cd7d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_DIR&#160;&#160;&#160;0x10	/* Directory */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00278">278</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa90c4c921c1955fd407d8bbf17f1674e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_HID&#160;&#160;&#160;0x02	/* Hidden */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00274">274</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a91161ef62e0e85ba3c2876d3d339473d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_LFN&#160;&#160;&#160;0x0F	/* LFN entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00277">277</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="aefa78fd6b130faaca4e115602869b57c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_MASK&#160;&#160;&#160;0x3F	/* Mask of defined bits */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00280">280</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="add6d85d1e7a02b4f6188783ef91a5f1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_RDO&#160;&#160;&#160;0x01	/* Read only */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00273">273</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1f25d5c17b5a3a6397b3398add8cdc15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_SYS&#160;&#160;&#160;0x04	/* System */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00275">275</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5cfae62dabae0a54809e43b36685ce7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AM_VOL&#160;&#160;&#160;0x08	/* Volume label */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00276">276</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="aee297a9011164cf485a4df2a72758b08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_LINKMAP&#160;&#160;&#160;0xFFFFFFFF</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00283">283</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a59adc4c82490d23754cd39c2fb99b0da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EOF&#160;&#160;&#160;(-1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00221">221</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a970cdd8970a3a94967ad64cfc5d4c161"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_eof</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fp</td><td>)</td>
          <td>&#160;&#160;&#160;(((fp)-&gt;fptr == (fp)-&gt;fsize) ? 1 : 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00215">215</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a25cbdabeed318802cf0e9db6671a33b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_error</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fp</td><td>)</td>
          <td>&#160;&#160;&#160;(((fp)-&gt;flag &amp; <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) ? 1 : 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00216">216</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26f33722c5bf1aa3cd6f0290a83eb2bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_size</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fp</td><td>)</td>
          <td>&#160;&#160;&#160;((fp)-&gt;fsize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00218">218</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e1daca7ce13cdc277e42185f7f9124f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define f_tell</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fp</td><td>)</td>
          <td>&#160;&#160;&#160;((fp)-&gt;fptr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00217">217</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5b2962e3616a1e9eb709d95f4c75c67c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA__DIRTY&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00264">264</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad3b47fe8126573b17752a9a242b76b9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA__ERROR&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00256">256</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac4b7d5223f84df91c306ffbff536fae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA__WRITTEN&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00263">263</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="afba4546b131dea4b24727fa20a80e29f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_CREATE_ALWAYS&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00261">261</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a417bb1babd1785fd181a806b5613eba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_CREATE_NEW&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00260">260</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a17b01553029920ac0468912b4bcb16c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_OPEN_ALWAYS&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00262">262</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0c5dd686b10f84c2a2b3954957a5979a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_OPEN_EXISTING&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00255">255</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1f4f3530ff03abbd979b072536e72290"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_READ&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00254">254</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="afa366963220c89b882c0361794020c14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FA_WRITE&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00259">259</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="aab755aa1b4f81f4aabee4a5d4738cfb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT12&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00268">268</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7ef90a36d99edfc0138a2155a17a79b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT16&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00269">269</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac63e0796095a789cefdbc3c3c676c9ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_FAT32&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00270">270</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6577ed2f95527745bf4d27c53488b9a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD2PD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">vol</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(vol)	        /* Each logical drive is bound to the same physical drive number */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00042">42</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="aadc4a9aefaf2588bdd7565549f5d91e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD2PT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">vol</td><td>)</td>
          <td>&#160;&#160;&#160;0			        /* Always mounts the 1st partition or in SFD */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00043">43</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4690304ddc975516f7dc02575c96e34e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_DWORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+3)&lt;&lt;24)|((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+2)&lt;&lt;16)|((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)&lt;&lt;8)|*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00294">294</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a398519bb08da6457e62567d1f0b567e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LD_WORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)&lt;&lt;8)|(<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00293">293</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="abf5aba973d95ac5843b80aa7379cdd66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ST_DWORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(val)&gt;&gt;8); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+2)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(val)&gt;&gt;16); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+3)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(val)&gt;&gt;24)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00296">296</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<a class="anchor" id="a95ceb4c25b216e71baa7102939edfd0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ST_WORD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;*(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val); *((<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>*)(ptr)+1)=(<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)((<a class="el" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(val)&gt;&gt;8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00295">295</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a03bdb8ce5895c7e261aadc2529637546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef char <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8h_source.html#l00060">60</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a49d0171ecbd362cda5680a0d360db44c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1"></a>FR_OK</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34"></a>FR_DISK_ERR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76"></a>FR_INT_ERR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45"></a>FR_NOT_READY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c"></a>FR_NO_FILE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532"></a>FR_NO_PATH</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45"></a>FR_INVALID_NAME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d"></a>FR_DENIED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450"></a>FR_EXIST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8"></a>FR_INVALID_OBJECT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b"></a>FR_WRITE_PROTECTED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65"></a>FR_INVALID_DRIVE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d"></a>FR_NOT_ENABLED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463"></a>FR_NO_FILESYSTEM</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca"></a>FR_MKFS_ABORTED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4"></a>FR_TIMEOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7"></a>FR_LOCKED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c"></a>FR_NOT_ENOUGH_CORE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9"></a>FR_TOO_MANY_OPEN_FILES</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6"></a>FR_INVALID_PARAMETER</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="ff_8h_source.html#l00160">160</a> of file <a class="el" href="ff_8h_source.html">ff.h</a>.</p>
<div class="fragment"><div class="line">             {</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> = 0,                              <span class="comment">/* (0) Succeeded */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>,                    <span class="comment">/* (1) A hard error occurred in the low level disk I/O layer */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>,                             <span class="comment">/* (2) Assertion failed */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac9894bed3e8632ede8d2712235fa8e45">FR_NOT_READY</a>,                   <span class="comment">/* (3) The physical drive cannot work */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>,                             <span class="comment">/* (4) Could not find the file */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>,                             <span class="comment">/* (5) Could not find the path */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>,                <span class="comment">/* (6) The path name format is invalid */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>,                              <span class="comment">/* (7) Access denied due to prohibited access or directory full */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>,                               <span class="comment">/* (8) Access denied due to prohibited access */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>,              <span class="comment">/* (9) The file/directory object is invalid */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cac3afbb423b1d4497229416812aff383b">FR_WRITE_PROTECTED</a>,             <span class="comment">/* (10) The physical drive is write protected */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>,               <span class="comment">/* (11) The logical drive number is invalid */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cafc56605c68aaffab4a428339a8bd600d">FR_NOT_ENABLED</a>,                 <span class="comment">/* (12) The volume has no work area */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca086154b5fee763f28c49fd0e2c1cb463">FR_NO_FILESYSTEM</a>,               <span class="comment">/* (13) There is no valid FAT volume */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca4b02760f758f5b1a89f445244fe9fbca">FR_MKFS_ABORTED</a>,                <span class="comment">/* (14) The f_mkfs() aborted due to any parameter error */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3f8ca7e51af8b129d14328de7243c5d4">FR_TIMEOUT</a>,                             <span class="comment">/* (15) Could not get a grant to access the volume within defined period */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca7db5afaaa2af591bd4a208b2967075d7">FR_LOCKED</a>,                              <span class="comment">/* (16) The operation is rejected according to the file sharing policy */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>,             <span class="comment">/* (17) LFN working buffer could not be allocated */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>, <span class="comment">/* (18) Number of open files &gt; _FS_SHARE */</span></div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3b89faeceab64db277d0fcdeaaa315d6">FR_INVALID_PARAMETER</a>    <span class="comment">/* (19) Given parameter is invalid */</span></div>
<div class="line">} <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8e1bc23ae1f0d1475671b3c3a85f1eb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add8af30ee0ccabb1194bcc57e34aca09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chdrive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae048494f6094a8254b40614f11e76048"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03435">3435</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);           <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                             <span class="comment">/* Is it a root directory? */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                                <span class="comment">/* File or sub directory */</span></div>
<div class="line">                                mask &amp;= <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>|<a class="code" href="ff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a>|<a class="code" href="ff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a>|<a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;    <span class="comment">/* Valid attribute mask */</span></div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = (value &amp; mask) | (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~mask); <span class="comment">/* Apply attribute change */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a004f8ebf5a01c5c7065292cc4545bc38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02728">2728</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if _FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>        res = validate(fp);</div>
<div class="line">        {</div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs = fp-&gt;fs;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;fs = 0;   <span class="comment">/* Discard file object */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        res = <a class="code" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a>(fp);               <span class="comment">/* Flush cached data */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {             <span class="comment">/* Decrement open counter */</span></div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs = fp-&gt;fs;;</div>
<div class="line">                res = validate(fp);</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        res = dec_lock(fp-&gt;lockid);     </div>
<div class="line">                        unlock_fs(fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                res = dec_lock(fp-&gt;lockid);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;fs = 0;   <span class="comment">/* Discard file object */</span></div>
<div class="line">        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a004f8ebf5a01c5c7065292cc4545bc38_cgraph.png" border="0" usemap="#ff_8h_a004f8ebf5a01c5c7065292cc4545bc38_cgraph" alt=""/></div>
<map name="ff_8h_a004f8ebf5a01c5c7065292cc4545bc38_cgraph" id="ff_8h_a004f8ebf5a01c5c7065292cc4545bc38_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847" title="f_sync" alt="" coords="118,107,178,133"/><area shape="rect" id="node5" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="231,81,311,108"/><area shape="rect" id="node7" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="227,132,314,159"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="363,5,490,32"/><area shape="rect" id="node11" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="364,56,489,83"/><area shape="rect" id="node13" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="365,107,488,133"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="363,157,490,184"/><area shape="rect" id="node17" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="366,208,487,235"/><area shape="rect" id="node19" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="365,259,488,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7701743efb836f599692e224063bc82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_fdisk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname">[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7db6acd9f9fbcb22f041d1f33304e7e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_forward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>(*)(const <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0a4251a19a74e3bd6429fde4c1db96d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getcwd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a08f50eeafdd73abb2f4ad033ce6cabb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getfree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03177">3177</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> n, clst, sect, stat;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> fat, *p;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Get drive number */</span></div>
<div class="line">        res = chk_mounted(&amp;path, fatfs, 0);</div>
<div class="line">        fs = *fatfs;</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="comment">/* If free_clust is valid, return it without full cluster scan */</span></div>
<div class="line">                <span class="keywordflow">if</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a> &lt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a> - 2) {</div>
<div class="line">                        *nclst = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <span class="comment">/* Get number of free clusters */</span></div>
<div class="line">                        fat = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a>;</div>
<div class="line">                        n = 0;</div>
<div class="line">                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>) {</div>
<div class="line">                                clst = 2;</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        stat = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fs, clst);</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 0xFFFFFFFF) { res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 1) { res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 0) n++;</div>
<div class="line">                                } <span class="keywordflow">while</span> (++clst &lt; fs-&gt;n_fatent);</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                clst = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>;</div>
<div class="line">                                sect = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a>;</div>
<div class="line">                                i = 0; p = 0;</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> (!i) {</div>
<div class="line">                                                res = move_window(fs, sect++);</div>
<div class="line">                                                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                                                p = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>;</div>
<div class="line">                                                i = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);</div>
<div class="line">                                        }</div>
<div class="line">                                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>) {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(p) == 0) n++;</div>
<div class="line">                                                p += 2; i -= 2;</div>
<div class="line">                                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                                <span class="keywordflow">if</span> ((<a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0x0FFFFFFF) == 0) n++;</div>
<div class="line">                                                p += 4; i -= 4;</div>
<div class="line">                                        }</div>
<div class="line">                                } <span class="keywordflow">while</span> (--clst);</div>
<div class="line">                        }</div>
<div class="line">                        fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a> = n;</div>
<div class="line">                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>) fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a66c4d8e68262d5542852e2aed6ce69b4">fsi_flag</a> = 1;</div>
<div class="line">                        *nclst = n;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a08f50eeafdd73abb2f4ad033ce6cabb0_cgraph.png" border="0" usemap="#ff_8h_a08f50eeafdd73abb2f4ad033ce6cabb0_cgraph" alt=""/></div>
<map name="ff_8h_a08f50eeafdd73abb2f4ad033ce6cabb0_cgraph" id="ff_8h_a08f50eeafdd73abb2f4ad033ce6cabb0_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="125,5,187,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af5af8207185e606397cb9077b61ab604"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>* f_gets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac9a2d3b1cec2ede839b1c70397e6f1f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_lseek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02897">2897</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                     <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                       <span class="comment">/* Check abort flag */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (fp-&gt;cltbl) {        <span class="comment">/* Fast seek */</span></div>
<div class="line">                <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ofs == <a class="code" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>) {    <span class="comment">/* Create CLMT */</span></div>
<div class="line">                        tbl = fp-&gt;cltbl;</div>
<div class="line">                        tlen = *tbl++; ulen = 2;        <span class="comment">/* Given table size and required table size */</span></div>
<div class="line">                        cl = fp-&gt;sclust;                        <span class="comment">/* Top of the chain */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cl) {</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        <span class="comment">/* Get a fragment */</span></div>
<div class="line">                                        tcl = cl; ncl = 0; ulen += 2;   <span class="comment">/* Top, length and used items */</span></div>
<div class="line">                                        <span class="keywordflow">do</span> {</div>
<div class="line">                                                pcl = cl; ncl++;</div>
<div class="line">                                                cl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;fs, cl);</div>
<div class="line">                                                <span class="keywordflow">if</span> (cl &lt;= 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                                <span class="keywordflow">if</span> (cl == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        } <span class="keywordflow">while</span> (cl == pcl + 1);</div>
<div class="line">                                        <span class="keywordflow">if</span> (ulen &lt;= tlen) {             <span class="comment">/* Store the length and top of the fragment */</span></div>
<div class="line">                                                *tbl++ = ncl; *tbl++ = tcl;</div>
<div class="line">                                        }</div>
<div class="line">                                } <span class="keywordflow">while</span> (cl &lt; fp-&gt;fs-&gt;n_fatent);        <span class="comment">/* Repeat until end of chain */</span></div>
<div class="line">                        }</div>
<div class="line">                        *fp-&gt;cltbl = ulen;      <span class="comment">/* Number of items used */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ulen &lt;= tlen)</div>
<div class="line">                                *tbl = 0;               <span class="comment">/* Terminate table */</span></div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>;       <span class="comment">/* Given table size is smaller than required */</span></div>
<div class="line"></div>
<div class="line">                } <span class="keywordflow">else</span> {                                                <span class="comment">/* Fast seek */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ofs &gt; fp-&gt;fsize)            <span class="comment">/* Clip offset at the file size */</span></div>
<div class="line">                                ofs = fp-&gt;fsize;</div>
<div class="line">                        fp-&gt;fptr = ofs;                         <span class="comment">/* Set file pointer */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ofs) {</div>
<div class="line">                                fp-&gt;clust = clmt_clust(fp, ofs - 1);</div>
<div class="line">                                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;fs, fp-&gt;clust);</div>
<div class="line">                                <span class="keywordflow">if</span> (!dsc) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                dsc += (ofs - 1) / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) &amp; (fp-&gt;fs-&gt;csize - 1);</div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) &amp;&amp; dsc != fp-&gt;dsect) {        <span class="comment">/* Refill sector cache if needed */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, fp-&gt;dsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                                fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, dsc, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)  <span class="comment">/* Load current sector */</span></div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        fp-&gt;dsect = dsc;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        <span class="comment">/* Normal Seek */</span></div>
<div class="line">        {</div>
<div class="line">                <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, bcs, nsect, ifptr;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ofs &gt; fp-&gt;fsize                                     <span class="comment">/* In read-only mode, clip offset with the file size */</span></div>
<div class="line">#<span class="keywordflow">if</span> !<a class="code" href="ffconf_8h.html#afb8d35370cfe0c23832ac2d82e854ec6">_FS_READONLY</a></div>
<div class="line">                         &amp;&amp; !(fp-&gt;flag &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        ) ofs = fp-&gt;fsize;</div>
<div class="line"></div>
<div class="line">                ifptr = fp-&gt;fptr;</div>
<div class="line">                fp-&gt;fptr = nsect = 0;</div>
<div class="line">                if (ofs) {</div>
<div class="line">                        bcs = (<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fp-&gt;fs-&gt;csize * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs);        <span class="comment">/* Cluster size (byte) */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ifptr &gt; 0 &amp;&amp;</div>
<div class="line">                                (ofs - 1) / bcs &gt;= (ifptr - 1) / bcs) { <span class="comment">/* When seek to same or following cluster, */</span></div>
<div class="line">                                fp-&gt;fptr = (ifptr - 1) &amp; ~(bcs - 1);    <span class="comment">/* start from the current cluster */</span></div>
<div class="line">                                ofs -= fp-&gt;fptr;</div>
<div class="line">                                clst = fp-&gt;clust;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                                                        <span class="comment">/* When seek to back cluster, */</span></div>
<div class="line">                                clst = fp-&gt;sclust;                                              <span class="comment">/* start from the first cluster */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (clst == 0) {                                                <span class="comment">/* If no cluster chain, create a new chain */</span></div>
<div class="line">                                        clst = create_chain(fp-&gt;fs, 0);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        fp-&gt;sclust = clst;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                fp-&gt;clust = clst;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (clst != 0) {</div>
<div class="line">                                <span class="keywordflow">while</span> (ofs &gt; bcs) {                                             <span class="comment">/* Cluster following loop */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) {                      <span class="comment">/* Check if in write mode or not */</span></div>
<div class="line">                                                clst = create_chain(fp-&gt;fs, clst);      <span class="comment">/* Force stretch if in write mode */</span></div>
<div class="line">                                                <span class="keywordflow">if</span> (clst == 0) {                                <span class="comment">/* When disk gets full, clip file size */</span></div>
<div class="line">                                                        ofs = bcs; <span class="keywordflow">break</span>;</div>
<div class="line">                                                }</div>
<div class="line">                                        } <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;fs, clst);   <span class="comment">/* Follow cluster chain if not in write mode */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst &lt;= 1 || clst &gt;= fp-&gt;fs-&gt;n_fatent) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        fp-&gt;clust = clst;</div>
<div class="line">                                        fp-&gt;fptr += bcs;</div>
<div class="line">                                        ofs -= bcs;</div>
<div class="line">                                }</div>
<div class="line">                                fp-&gt;fptr += ofs;</div>
<div class="line">                                <span class="keywordflow">if</span> (ofs % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)) {</div>
<div class="line">                                        nsect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;fs, clst);       <span class="comment">/* Current sector */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (!nsect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        nsect += ofs / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) &amp;&amp; nsect != fp-&gt;dsect) {      <span class="comment">/* Fill sector cache if needed */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {                     <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, fp-&gt;dsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, nsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)        <span class="comment">/* Fill sector cache */</span></div>
<div class="line">                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;dsect = nsect;</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;fptr &gt; fp-&gt;fsize) {                     <span class="comment">/* Set file change flag if the file size is extended */</span></div>
<div class="line">                        fp-&gt;fsize = fp-&gt;fptr;</div>
<div class="line">                        fp-&gt;flag |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_ac9a2d3b1cec2ede839b1c70397e6f1f8_cgraph.png" border="0" usemap="#ff_8h_ac9a2d3b1cec2ede839b1c70397e6f1f8_cgraph" alt=""/></div>
<map name="ff_8h_ac9a2d3b1cec2ede839b1c70397e6f1f8_cgraph" id="ff_8h_ac9a2d3b1cec2ede839b1c70397e6f1f8_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="128,5,189,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="117,56,200,83"/><area shape="rect" id="node7" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="119,107,199,133"/><area shape="rect" id="node9" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="119,157,198,184"/><area shape="rect" id="node11" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="249,157,338,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a13452975056874fbec616433db001bf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03362">3362</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir, n;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dsc, dcl, pcl, tim = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);                   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;               <span class="comment">/* Any object with same name is already existing */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                                <span class="comment">/* Can create a new directory */</span></div>
<div class="line">                        dcl = create_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);           <span class="comment">/* Allocate a cluster for the new directory table */</span></div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 0) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;          <span class="comment">/* No space to allocate a new cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 1) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 0xFFFFFFFF) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)                                       <span class="comment">/* Flush FAT */</span></div>
<div class="line">                                res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* Initialize the new directory table */</span></div>
<div class="line">                                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dcl);</div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>;</div>
<div class="line">                                mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                mem_set(dir+<a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>, <span class="charliteral">&#39; &#39;</span>, 8+3);        <span class="comment">/* Create &quot;.&quot; entry */</span></div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;</div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line">                                st_clust(dir, dcl);</div>
<div class="line">                                mem_cpy(dir+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, dir, <a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>);       <span class="comment">/* Create &quot;..&quot; entry */</span></div>
<div class="line">                                dir[33] = <span class="charliteral">&#39;.&#39;</span>; pcl = dj.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> &amp;&amp; pcl == dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aebfa6556d8f94e951a8b2c1eb740e9a1">dirbase</a>)</div>
<div class="line">                                        pcl = 0;</div>
<div class="line">                                st_clust(dir+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, pcl);</div>
<div class="line">                                <span class="keywordflow">for</span> (n = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a>; n; n--) {        <span class="comment">/* Write dot entries and clear following sectors */</span></div>
<div class="line">                                        dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> = dsc++;</div>
<div class="line">                                        dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                        res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                                        mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = dir_register(&amp;dj);      <span class="comment">/* Register the object to the directoy */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dcl);                       <span class="comment">/* Could not register, remove cluster chain */</span></div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;                         <span class="comment">/* Attribute */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);         <span class="comment">/* Created time */</span></div>
<div class="line">                                st_clust(dir, dcl);                                     <span class="comment">/* Table start cluster */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a13452975056874fbec616433db001bf9_cgraph.png" border="0" usemap="#ff_8h_a13452975056874fbec616433db001bf9_cgraph" alt=""/></div>
<map name="ff_8h_a13452975056874fbec616433db001bf9_cgraph" id="ff_8h_a13452975056874fbec616433db001bf9_cgraph">
<area shape="rect" id="node3" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="118,132,205,159"/><area shape="rect" id="node17" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="120,183,203,209"/><area shape="rect" id="node5" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="254,5,381,32"/><area shape="rect" id="node7" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="255,56,380,83"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="256,107,379,133"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="254,157,381,184"/><area shape="rect" id="node13" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="257,208,378,235"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="256,259,379,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec3ab4178a070d6ef2ba3d3e94b022aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkfs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad995e9683ac193923812fbb250ba0acb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02288">2288</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *rfs;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (vol &gt;= <a class="code" href="ffconf_8h.html#a366da9a40c8ceb3103a6b72ca02b9969">_VOLUMES</a>)            <span class="comment">/* Check if the drive number is valid */</span></div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>;</div>
<div class="line">        rfs = FatFs[vol];                       <span class="comment">/* Get current fs object */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (rfs) {</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                clear_lock(rfs);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if _FS_REENTRANT                               </span><span class="comment">/* Discard sync object of the current volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (!ff_del_syncobj(rfs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                rfs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> = 0;               <span class="comment">/* Clear old fs object */</span></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fs) {</div>
<div class="line">                fs-&gt;fs_type = 0;                <span class="comment">/* Clear new fs object */</span></div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT                               </span><span class="comment">/* Create sync object for the new volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (!ff_cre_syncobj(vol, &amp;fs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        FatFs[vol] = fs;                        <span class="comment">/* Register new fs object */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf2fcce74586a7af2a86d0543de6cdef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02328">2328</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line">        fp-&gt;fs = 0;                     <span class="comment">/* Clear file object */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>        mode &amp;= <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a> | <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a> | <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>;</div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        mode &amp;= <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>;</div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY       </span><span class="comment">/* R/W configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir)       <span class="comment">/* Current dir itself */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">else</span></div>
<div class="line">                                res = chk_lock(&amp;dj, (mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                }</div>
<div class="line">                <span class="comment">/* Create or Open a file */</span></div>
<div class="line">                <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)) {</div>
<div class="line">                        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw, cl;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* No file, create new */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>)                  <span class="comment">/* There is no file to open, create a new entry */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                                        res = enq_lock() ? dir_register(&amp;dj) : <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                        res = dir_register(&amp;dj);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                mode |= <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>;               <span class="comment">/* File is created */</span></div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;                                   <span class="comment">/* New entry */</span></div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span> {                                                          <span class="comment">/* Any object is already existing */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; (<a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a> | <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) {        <span class="comment">/* Cannot overwrite it (R/O or DIR) */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> (mode &amp; <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)       <span class="comment">/* Cannot create as new file */</span></div>
<div class="line">                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (mode &amp; <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>)) {        <span class="comment">/* Truncate it if overwrite mode */</span></div>
<div class="line">                                dw = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();                                     <span class="comment">/* Created time */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>, dw);</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = 0;                                      <span class="comment">/* Reset attribute */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, 0);          <span class="comment">/* size = 0 */</span></div>
<div class="line">                                cl = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);                      <span class="comment">/* Get start cluster */</span></div>
<div class="line">                                st_clust(dir, 0);                                       <span class="comment">/* cluster = 0 */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                <span class="keywordflow">if</span> (cl) {                                                       <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line">                                        dw = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a>;</div>
<div class="line">                                        res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, cl);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a10cd8b80b3b6474bf0d6432c8fb9d2d2">last_clust</a> = cl - 1;     <span class="comment">/* Reuse the cluster hole */</span></div>
<div class="line">                                                res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dw);</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {  <span class="comment">/* Open an existing file */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Follow succeeded */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {           <span class="comment">/* It is a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)) <span class="comment">/* R/O violation */</span></div>
<div class="line">                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        <span class="keywordflow">if</span> (mode &amp; FA_CREATE_ALWAYS)                    <span class="comment">/* Set file change flag if created or overwritten */</span></div>
<div class="line">                                mode |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                        fp-&gt;dir_sect = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a>;                  <span class="comment">/* Pointer to the directory entry */</span></div>
<div class="line">                        fp-&gt;dir_ptr = dir;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;lockid = inc_lock(&amp;dj, (mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (!fp-&gt;lockid) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#else                           </span><span class="comment">/* R/O configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* Follow succeeded */</span></div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                             <span class="comment">/* Current dir itself */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; AM_DIR)     <span class="comment">/* It is a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        fp-&gt;flag = mode;                                        <span class="comment">/* File access mode */</span></div>
<div class="line">                        fp-&gt;sclust = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);      <span class="comment">/* File start cluster */</span></div>
<div class="line">                        fp-&gt;fsize = <a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>); <span class="comment">/* File size */</span></div>
<div class="line">                        fp-&gt;fptr = 0;                                           <span class="comment">/* File pointer */</span></div>
<div class="line">                        fp-&gt;dsect = 0;</div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;cltbl = 0;                                          <span class="comment">/* Normal seek mode */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;fs = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>; fp-&gt;<a class="code" href="struct_f_a_t_f_s.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a> = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a>;     <span class="comment">/* Validate file object */</span></div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_acf2fcce74586a7af2a86d0543de6cdef_cgraph.png" border="0" usemap="#ff_8h_acf2fcce74586a7af2a86d0543de6cdef_cgraph" alt=""/></div>
<map name="ff_8h_acf2fcce74586a7af2a86d0543de6cdef_cgraph" id="ff_8h_acf2fcce74586a7af2a86d0543de6cdef_cgraph">
<area shape="rect" id="node3" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="115,132,202,159"/><area shape="rect" id="node5" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="251,5,378,32"/><area shape="rect" id="node7" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="252,56,377,83"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="253,107,376,133"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="251,157,378,184"/><area shape="rect" id="node13" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="254,208,375,235"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="253,259,376,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7608f0d3c152bcd2950704d881e41b8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_opendir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03055">3055</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!dj) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj-&gt;fs, 0);</div>
<div class="line">        fs = dj-&gt;fs;</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line">                res = follow_path(dj, path);                    <span class="comment">/* Follow the path to the directory */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Follow completed */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dj-&gt;dir) {                                          <span class="comment">/* It is not the root dir */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dj-&gt;dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {       <span class="comment">/* The object is a directory */</span></div>
<div class="line">                                        dj-&gt;sclust = ld_clust(fs, dj-&gt;dir);</div>
<div class="line">                                } <span class="keywordflow">else</span> {                                                <span class="comment">/* The object is not a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                dj-&gt;id = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a>;</div>
<div class="line">                                res = dir_sdi(dj, 0);                   <span class="comment">/* Rewind dir */</span></div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) dj-&gt;fs = 0;                   <span class="comment">/* Invalidate the dir object if function faild */</span></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                dj-&gt;fs = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a7608f0d3c152bcd2950704d881e41b8c_icgraph.png" border="0" usemap="#ff_8h_a7608f0d3c152bcd2950704d881e41b8c_icgraph" alt=""/></div>
<map name="ff_8h_a7608f0d3c152bcd2950704d881e41b8c_icgraph" id="ff_8h_a7608f0d3c152bcd2950704d881e41b8c_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="128,29,208,56"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0af8ac748b025f644daabe5ce5609d8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_printf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6b6f28130325afd1c1ee5a62da837042"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_putc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acb521b6e0831ac577eb2772bd8ba44a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int f_puts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9f0df1d597f92e2e6482e3a8f5c9b136"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02460">2460</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect, remain;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> rcnt, cc;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> csect, *rbuff = buff;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        *br = 0;        <span class="comment">/* Clear read byte counter */</span></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                                     <span class="comment">/* Check validity */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                                       <span class="comment">/* Aborted file? */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!(fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>))                                      <span class="comment">/* Check access mode */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line">        remain = fp-&gt;fsize - fp-&gt;fptr;</div>
<div class="line">        <span class="keywordflow">if</span> (btr &gt; remain) btr = (<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)remain;           <span class="comment">/* Truncate btr by remaining bytes */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> ( ;  btr;                                                           <span class="comment">/* Repeat until all data read */</span></div>
<div class="line">                rbuff += rcnt, fp-&gt;fptr += rcnt, *br += rcnt, btr -= rcnt) {</div>
<div class="line">                <span class="keywordflow">if</span> ((fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)) == 0) {             <span class="comment">/* On the sector boundary? */</span></div>
<div class="line">                        csect = (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(fp-&gt;fptr / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) &amp; (fp-&gt;fs-&gt;csize - 1));    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!csect) {                                           <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;fptr == 0) {                    <span class="comment">/* On the top of the file? */</span></div>
<div class="line">                                        clst = fp-&gt;sclust;                      <span class="comment">/* Follow from the origin */</span></div>
<div class="line">                                } <span class="keywordflow">else</span> {                                                <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;cltbl)</div>
<div class="line">                                                clst = clmt_clust(fp, fp-&gt;fptr);        <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;fs, fp-&gt;clust);      <span class="comment">/* Follow cluster chain on the FAT */</span></div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">if</span> (clst &lt; 2) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;clust = clst;                               <span class="comment">/* Update current cluster */</span></div>
<div class="line">                        }</div>
<div class="line">                        sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;fs, fp-&gt;clust);   <span class="comment">/* Get current sector */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!sect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                        sect += csect;</div>
<div class="line">                        cc = btr / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs);                          <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cc) {                                                       <span class="comment">/* Read maximum contiguous sectors directly */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;fs-&gt;csize) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line">                                        cc = fp-&gt;fs-&gt;csize - csect;</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;fs-&gt;drv, rbuff, sect, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)cc) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY &amp;&amp; _FS_MINIMIZE &lt;= 2                  </span><span class="comment">/* Replace one of the read sectors with cached data if it contains a dirty sector */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;fs-&gt;wflag &amp;&amp; fp-&gt;fs-&gt;winsect - sect &lt; cc)</div>
<div class="line">                                        mem_cpy(rbuff + ((fp-&gt;fs-&gt;winsect - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)), fp-&gt;fs-&gt;win, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> ((fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) &amp;&amp; fp-&gt;dsect - sect &lt; cc)</div>
<div class="line">                                        mem_cpy(rbuff + ((fp-&gt;dsect - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)), fp-&gt;buf, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) * cc;                 <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;dsect != sect) {                        <span class="comment">/* Load data sector if not in cache */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, fp-&gt;dsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, sect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <span class="comment">/* Fill sector cache */</span></div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;dsect = sect;</div>
<div class="line">                }</div>
<div class="line">                rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) - ((<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));      <span class="comment">/* Get partial sector data from sector buffer */</span></div>
<div class="line">                <span class="keywordflow">if</span> (rcnt &gt; btr) rcnt = btr;</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (move_window(fp-&gt;fs, fp-&gt;dsect))             <span class="comment">/* Move sector window */</span></div>
<div class="line">                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                mem_cpy(rbuff, &amp;fp-&gt;fs-&gt;win[fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)], rcnt);      <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                mem_cpy(rbuff, &amp;fp-&gt;buf[fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)], rcnt);  <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a9f0df1d597f92e2e6482e3a8f5c9b136_cgraph.png" border="0" usemap="#ff_8h_a9f0df1d597f92e2e6482e3a8f5c9b136_cgraph" alt=""/></div>
<map name="ff_8h_a9f0df1d597f92e2e6482e3a8f5c9b136_cgraph" id="ff_8h_a9f0df1d597f92e2e6482e3a8f5c9b136_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="123,5,184,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="112,56,195,83"/><area shape="rect" id="node7" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="114,107,193,133"/><area shape="rect" id="node11" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="113,157,193,184"/><area shape="rect" id="node9" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="243,107,333,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae84f86ce841a3facb95060e0bdefd5fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03102">3102</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(dj);                                             <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (!fno) {</div>
<div class="line">                        res = dir_sdi(dj, 0);                   <span class="comment">/* Rewind the directory object */</span></div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line">                        res = dir_read(dj);                             <span class="comment">/* Read an directory item */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                <span class="comment">/* Reached end of dir */</span></div>
<div class="line">                                dj-&gt;sect = 0;</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                             <span class="comment">/* A valid entry is found */</span></div>
<div class="line">                                get_fileinfo(dj, fno);          <span class="comment">/* Get the object information */</span></div>
<div class="line">                                res = dir_next(dj, 0);          <span class="comment">/* Increment index for next */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {</div>
<div class="line">                                        dj-&gt;sect = 0;</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj-&gt;fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_ae84f86ce841a3facb95060e0bdefd5fb_icgraph.png" border="0" usemap="#ff_8h_ae84f86ce841a3facb95060e0bdefd5fb_icgraph" alt=""/></div>
<map name="ff_8h_ae84f86ce841a3facb95060e0bdefd5fb_icgraph" id="ff_8h_ae84f86ce841a3facb95060e0bdefd5fb_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="125,29,205,56"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0670638c6a93e143b7a8b196ab361c83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03518">3518</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> djo, djn;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> buf[21], *dir;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path_old, &amp;djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                djn.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>;</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(djo);</div>
<div class="line">                res = follow_path(&amp;djo, path_old);              <span class="comment">/* Check old object */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (djo.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;djo, 2);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Old object is found */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!djo.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>) {                                         <span class="comment">/* Is root dir? */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                mem_cpy(buf, djo.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>+<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>, 21);             <span class="comment">/* Save the object information except for name */</span></div>
<div class="line">                                mem_cpy(&amp;djn, &amp;djo, <span class="keyword">sizeof</span> (<a class="code" href="struct_d_i_r.html">DIR</a>));              <span class="comment">/* Check new object */</span></div>
<div class="line">                                res = follow_path(&amp;djn, path_new);</div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;               <span class="comment">/* The new object name is already existing */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                                <span class="comment">/* Is it a valid path and no name collision? */</span></div>
<div class="line"><span class="comment">/* Start critical section that an interruption or error can cause cross-link */</span></div>
<div class="line">                                        res = dir_register(&amp;djn);                       <span class="comment">/* Register the new entry */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                dir = djn.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;                                  <span class="comment">/* Copy object information except for name */</span></div>
<div class="line">                                                mem_cpy(dir+13, buf+2, 19);</div>
<div class="line">                                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = buf[0] | <a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;</div>
<div class="line">                                                djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (djo.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> != djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) {             <span class="comment">/* Update .. entry in the directory if needed */</span></div>
<div class="line">                                                        dw = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, ld_clust(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir));</div>
<div class="line">                                                        <span class="keywordflow">if</span> (!dw) {</div>
<div class="line">                                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                                                res = move_window(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dw);</div>
<div class="line">                                                                dir = djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>;       <span class="comment">/* .. entry */</span></div>
<div class="line">                                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; dir[1] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line">                                                                        dw = (djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> &amp;&amp; djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> == djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aebfa6556d8f94e951a8b2c1eb740e9a1">dirbase</a>) ? 0 : djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;</div>
<div class="line">                                                                        st_clust(dir, dw);</div>
<div class="line">                                                                        djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                                                }</div>
<div class="line">                                                        }</div>
<div class="line">                                                }</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                        res = dir_remove(&amp;djo);         <span class="comment">/* Remove old entry */</span></div>
<div class="line">                                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line">                                                                res = sync(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line"><span class="comment">/* End critical section */</span></div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a0670638c6a93e143b7a8b196ab361c83_cgraph.png" border="0" usemap="#ff_8h_a0670638c6a93e143b7a8b196ab361c83_cgraph" alt=""/></div>
<map name="ff_8h_a0670638c6a93e143b7a8b196ab361c83_cgraph" id="ff_8h_a0670638c6a93e143b7a8b196ab361c83_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="128,5,211,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aee04d91ad57ffe5a66a6a0e0b16fdfe6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_stat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03144">3144</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                             <span class="comment">/* Follow completed */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>)             <span class="comment">/* Found an object */</span></div>
<div class="line">                                get_fileinfo(&amp;dj, fno);</div>
<div class="line">                        <span class="keywordflow">else</span>                    <span class="comment">/* It is root dir */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae3ba7b156902f7678b3344f1e5bc5e88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02680">2680</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> tim;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                     <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>) {   <span class="comment">/* Has the file been written? */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY   </span><span class="comment">/* Write-back dirty buffer */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, fp-&gt;dsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="comment">/* Update the directory entry */</span></div>
<div class="line">                        res = move_window(fp-&gt;fs, fp-&gt;dir_sect);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                dir = fp-&gt;dir_ptr;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] |= <a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;                                        <span class="comment">/* Set archive bit */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, fp-&gt;fsize);          <span class="comment">/* Update file size */</span></div>
<div class="line">                                st_clust(dir, fp-&gt;sclust);                                      <span class="comment">/* Update start cluster */</span></div>
<div class="line">                                tim = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();                                            <span class="comment">/* Update updated time */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#afa0625d73f4683df24345f51e7a43da3">DIR_LstAccDate</a>, 0);</div>
<div class="line">                                fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                                fp-&gt;fs-&gt;wflag = 1;</div>
<div class="line">                                res = sync(fp-&gt;fs);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_cgraph.png" border="0" usemap="#ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_cgraph" alt=""/></div>
<map name="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_cgraph" id="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_cgraph">
<area shape="rect" id="node3" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="119,81,199,108"/><area shape="rect" id="node5" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="115,132,202,159"/><area shape="rect" id="node7" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="251,5,378,32"/><area shape="rect" id="node9" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="252,56,377,83"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="253,107,376,133"/><area shape="rect" id="node13" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="251,157,378,184"/><area shape="rect" id="node15" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="254,208,375,235"/><area shape="rect" id="node17" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="253,259,376,285"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_icgraph.png" border="0" usemap="#ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_icgraph" alt=""/></div>
<map name="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_icgraph" id="ff_8h_ae3ba7b156902f7678b3344f1e5bc5e88_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a004f8ebf5a01c5c7065292cc4545bc38" title="f_close" alt="" coords="115,5,178,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a29d002c2c9b726151b9c1a4ad742c41d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03244">3244</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ncl;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                             <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) {                     <span class="comment">/* Check abort flag */</span></div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <span class="keywordflow">if</span> (!(fp-&gt;flag &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>))             <span class="comment">/* Check access mode */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;fsize &gt; fp-&gt;fptr) {</div>
<div class="line">                        fp-&gt;fsize = fp-&gt;fptr;   <span class="comment">/* Set file size to current R/W point */</span></div>
<div class="line">                        fp-&gt;flag |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (fp-&gt;fptr == 0) {    <span class="comment">/* When set file size to zero, remove entire cluster chain */</span></div>
<div class="line">                                res = remove_chain(fp-&gt;fs, fp-&gt;sclust);</div>
<div class="line">                                fp-&gt;sclust = 0;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                <span class="comment">/* When truncate a part of the file, remove remaining clusters */</span></div>
<div class="line">                                ncl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;fs, fp-&gt;clust);</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (ncl == 0xFFFFFFFF) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (ncl == 1) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ncl &lt; fp-&gt;fs-&gt;n_fatent) {</div>
<div class="line">                                        res = <a class="code" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a>(fp-&gt;fs, fp-&gt;clust, 0x0FFFFFFF);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = remove_chain(fp-&gt;fs, ncl);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;flag |= <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a29d002c2c9b726151b9c1a4ad742c41d_cgraph.png" border="0" usemap="#ff_8h_a29d002c2c9b726151b9c1a4ad742c41d_cgraph" alt=""/></div>
<map name="ff_8h_a29d002c2c9b726151b9c1a4ad742c41d_cgraph" id="ff_8h_a29d002c2c9b726151b9c1a4ad742c41d_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="133,5,195,32"/><area shape="rect" id="node5" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7" title="put_fat" alt="" coords="133,56,195,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aab68be1620730d7ed482d209f417b40b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_unlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03294">3294</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj, sdj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dclst;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);           <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;                  <span class="comment">/* Cannot remove dot entry */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;dj, 2);       <span class="comment">/* Cannot remove open file */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* The object is accessible */</span></div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;          <span class="comment">/* Cannot remove the start directory */</span></div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;                <span class="comment">/* Cannot remove R/O object */</span></div>
<div class="line">                        }</div>
<div class="line">                        dclst = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) { <span class="comment">/* Is it a sub-dir? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dclst &lt; 2) {</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        mem_cpy(&amp;sdj, &amp;dj, <span class="keyword">sizeof</span> (<a class="code" href="struct_d_i_r.html">DIR</a>));       <span class="comment">/* Check if the sub-dir is empty or not */</span></div>
<div class="line">                                        sdj.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = dclst;</div>
<div class="line">                                        res = dir_sdi(&amp;sdj, 2);         <span class="comment">/* Exclude dot entries */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                res = dir_read(&amp;sdj);</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>                <span class="comment">/* Not empty dir */</span></div>
<div class="line">#<span class="keywordflow">if</span> <a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div>
<div class="line">                                                || dclst == dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a2ff1c337066d051b15eaf9cc93279347">cdir</a> <span class="comment">/* Current dir */</span></div>
<div class="line">#endif</div>
<div class="line">                                                ) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;     <span class="comment">/* Empty */</span></div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                res = dir_remove(&amp;dj);          <span class="comment">/* Remove the directory entry */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                        <span class="keywordflow">if</span> (dclst)                              <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line">                                                res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dclst);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a748ed6ec723321a5c5e35e7112ac531c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_utime </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03477">3477</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                     <span class="comment">/* Root directory */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                        <span class="comment">/* File or sub-directory */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, fno-&gt;ftime);</div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a>, fno-&gt;fdate);</div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af02e0c59a61ad5954bc9b566fe8a79b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02561">2561</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wcnt, cc;</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *wbuff = buff;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> csect;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        *<a class="code" href="app__log_8c.html#a43bf7f8524c9a39d4b8d4fa43fc51620">bw</a> = 0;        <span class="comment">/* Clear write byte counter */</span></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                             <span class="comment">/* Check validity */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                               <span class="comment">/* Aborted file? */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!(fp-&gt;flag &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>))                             <span class="comment">/* Check access mode */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line">        <span class="keywordflow">if</span> ((<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(fp-&gt;fsize + btw) &lt; fp-&gt;fsize) btw = 0;      <span class="comment">/* File size cannot reach 4GB */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> ( ;  btw;                                                   <span class="comment">/* Repeat until all data written */</span></div>
<div class="line">                wbuff += wcnt, fp-&gt;fptr += wcnt, *<a class="code" href="app__log_8c.html#a43bf7f8524c9a39d4b8d4fa43fc51620">bw</a> += wcnt, btw -= wcnt) {</div>
<div class="line">                <span class="keywordflow">if</span> ((fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)) == 0) {     <span class="comment">/* On the sector boundary? */</span></div>
<div class="line">                        csect = (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(fp-&gt;fptr / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) &amp; (fp-&gt;fs-&gt;csize - 1));    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!csect) {                                   <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;fptr == 0) {            <span class="comment">/* On the top of the file? */</span></div>
<div class="line">                                        clst = fp-&gt;sclust;              <span class="comment">/* Follow from the origin */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0)                  <span class="comment">/* When no cluster is allocated, */</span></div>
<div class="line">                                                fp-&gt;sclust = clst = create_chain(fp-&gt;fs, 0);    <span class="comment">/* Create a new cluster chain */</span></div>
<div class="line">                                } <span class="keywordflow">else</span> {                                        <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;cltbl)</div>
<div class="line">                                                clst = clmt_clust(fp, fp-&gt;fptr);        <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = create_chain(fp-&gt;fs, fp-&gt;clust); <span class="comment">/* Follow or stretch cluster chain on the FAT */</span></div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0) <span class="keywordflow">break</span>;           <span class="comment">/* Could not allocate a new cluster (disk full) */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;clust = clst;                       <span class="comment">/* Update current cluster */</span></div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;fs-&gt;winsect == fp-&gt;dsect &amp;&amp; move_window(fp-&gt;fs, 0))     <span class="comment">/* Write-back sector cache */</span></div>
<div class="line">                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;flag &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back sector cache */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, fp-&gt;dsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;fs, fp-&gt;clust);   <span class="comment">/* Get current sector */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!sect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                        sect += csect;</div>
<div class="line">                        cc = btw / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs);                  <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cc) {                                               <span class="comment">/* Write maximum contiguous sectors directly */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;fs-&gt;csize) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line">                                        cc = fp-&gt;fs-&gt;csize - csect;</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;fs-&gt;drv, wbuff, sect, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)cc) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;fs-&gt;winsect - sect &lt; cc) {      <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line">                                        mem_cpy(fp-&gt;fs-&gt;win, wbuff + ((fp-&gt;fs-&gt;winsect - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)), <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));</div>
<div class="line">                                        fp-&gt;fs-&gt;wflag = 0;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;dsect - sect &lt; cc) { <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line">                                        mem_cpy(fp-&gt;buf, wbuff + ((fp-&gt;dsect - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)), <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));</div>
<div class="line">                                        fp-&gt;flag &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) * cc;         <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;fptr &gt;= fp-&gt;fsize) {    <span class="comment">/* Avoid silly cache filling at growing edge */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (move_window(fp-&gt;fs, 0)) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;fs-&gt;winsect = sect;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;dsect != sect) {                <span class="comment">/* Fill sector cache with file data */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;fptr &lt; fp-&gt;fsize &amp;&amp;</div>
<div class="line">                                        <a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;fs-&gt;drv, fp-&gt;buf, sect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;dsect = sect;</div>
<div class="line">                }</div>
<div class="line">                wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs) - ((<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs));<span class="comment">/* Put partial sector into file I/O buffer */</span></div>
<div class="line">                <span class="keywordflow">if</span> (wcnt &gt; btw) wcnt = btw;</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (move_window(fp-&gt;fs, fp-&gt;dsect))     <span class="comment">/* Move sector window */</span></div>
<div class="line">                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                mem_cpy(&amp;fp-&gt;fs-&gt;win[fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)], wbuff, wcnt);      <span class="comment">/* Fit partial sector */</span></div>
<div class="line">                fp-&gt;fs-&gt;wflag = 1;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                mem_cpy(&amp;fp-&gt;buf[fp-&gt;fptr % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;fs)], wbuff, wcnt);  <span class="comment">/* Fit partial sector */</span></div>
<div class="line">                fp-&gt;flag |= <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;fptr &gt; fp-&gt;fsize) fp-&gt;fsize = fp-&gt;fptr; <span class="comment">/* Update file size if needed */</span></div>
<div class="line">        fp-&gt;flag |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;                                                <span class="comment">/* Set file change flag */</span></div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_af02e0c59a61ad5954bc9b566fe8a79b8_cgraph.png" border="0" usemap="#ff_8h_af02e0c59a61ad5954bc9b566fe8a79b8_cgraph" alt=""/></div>
<map name="ff_8h_af02e0c59a61ad5954bc9b566fe8a79b8_cgraph" id="ff_8h_af02e0c59a61ad5954bc9b566fe8a79b8_cgraph">
<area shape="rect" id="node3" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="113,5,193,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="112,56,195,83"/><area shape="rect" id="node7" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="114,107,193,133"/><area shape="rect" id="node9" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="243,107,333,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba4ff5aa2dbdb4826115a930517d52c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a> ff_convert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ccsbcs_8c_source.html#l00500">500</a> of file <a class="el" href="ccsbcs_8c_source.html">ccsbcs.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a> c;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (src &lt; 0x80) {       <span class="comment">/* ASCII */</span></div>
<div class="line">                c = src;</div>
<div class="line"></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">if</span> (dir) {              <span class="comment">/* OEMCP to Unicode */</span></div>
<div class="line">                        c = (src &gt;= 0x100) ? 0 : Tbl[src - 0x80];</div>
<div class="line"></div>
<div class="line">                } <span class="keywordflow">else</span> {                <span class="comment">/* Unicode to OEMCP */</span></div>
<div class="line">                        <span class="keywordflow">for</span> (c = 0; c &lt; 0x80; c++) {</div>
<div class="line">                                <span class="keywordflow">if</span> (src == Tbl[c]) <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        c = (c + 0x80) &amp; 0xFF;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> c;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afb1da5baa3afc7b9d8e1c79c843b9b06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a> ff_wtoupper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ccsbcs_8c_source.html#l00527">527</a> of file <a class="el" href="ccsbcs_8c_source.html">ccsbcs.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a> tbl_lower[] = { 0x61, 0x62, 0x63, 0x64, 0x65, 0x66, 0x67, 0x68, 0x69, 0x6A, 0x6B, 0x6C, 0x6D, 0x6E, 0x6F, 0x70, 0x71, 0x72, 0x73, 0x74, 0x75, 0x76, 0x77, 0x78, 0x79, 0x7A, 0xA1, 0x00A2, 0x00A3, 0x00A5, 0x00AC, 0x00AF, 0xE0, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7, 0xE8, 0xE9, 0xEA, 0xEB, 0xEC, 0xED, 0xEE, 0xEF, 0xF0, 0xF1, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6, 0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0x0FF, 0x101, 0x103, 0x105, 0x107, 0x109, 0x10B, 0x10D, 0x10F, 0x111, 0x113, 0x115, 0x117, 0x119, 0x11B, 0x11D, 0x11F, 0x121, 0x123, 0x125, 0x127, 0x129, 0x12B, 0x12D, 0x12F, 0x131, 0x133, 0x135, 0x137, 0x13A, 0x13C, 0x13E, 0x140, 0x142, 0x144, 0x146, 0x148, 0x14B, 0x14D, 0x14F, 0x151, 0x153, 0x155, 0x157, 0x159, 0x15B, 0x15D, 0x15F, 0x161, 0x163, 0x165, 0x167, 0x169, 0x16B, 0x16D, 0x16F, 0x171, 0x173, 0x175, 0x177, 0x17A, 0x17C, 0x17E, 0x192, 0x3B1, 0x3B2, 0x3B3, 0x3B4, 0x3B5, 0x3B6, 0x3B7, 0x3B8, 0x3B9, 0x3BA, 0x3BB, 0x3BC, 0x3BD, 0x3BE, 0x3BF, 0x3C0, 0x3C1, 0x3C3, 0x3C4, 0x3C5, 0x3C6, 0x3C7, 0x3C8, 0x3C9, 0x3CA, 0x430, 0x431, 0x432, 0x433, 0x434, 0x435, 0x436, 0x437, 0x438, 0x439, 0x43A, 0x43B, 0x43C, 0x43D, 0x43E, 0x43F, 0x440, 0x441, 0x442, 0x443, 0x444, 0x445, 0x446, 0x447, 0x448, 0x449, 0x44A, 0x44B, 0x44C, 0x44D, 0x44E, 0x44F, 0x451, 0x452, 0x453, 0x454, 0x455, 0x456, 0x457, 0x458, 0x459, 0x45A, 0x45B, 0x45C, 0x45E, 0x45F, 0x2170, 0x2171, 0x2172, 0x2173, 0x2174, 0x2175, 0x2176, 0x2177, 0x2178, 0x2179, 0x217A, 0x217B, 0x217C, 0x217D, 0x217E, 0x217F, 0xFF41, 0xFF42, 0xFF43, 0xFF44, 0xFF45, 0xFF46, 0xFF47, 0xFF48, 0xFF49, 0xFF4A, 0xFF4B, 0xFF4C, 0xFF4D, 0xFF4E, 0xFF4F, 0xFF50, 0xFF51, 0xFF52, 0xFF53, 0xFF54, 0xFF55, 0xFF56, 0xFF57, 0xFF58, 0xFF59, 0xFF5A, 0 };</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="integer_8h.html#a570001c92f314285ad3e7139d8c58cf7">WCHAR</a> tbl_upper[] = { 0x41, 0x42, 0x43, 0x44, 0x45, 0x46, 0x47, 0x48, 0x49, 0x4A, 0x4B, 0x4C, 0x4D, 0x4E, 0x4F, 0x50, 0x51, 0x52, 0x53, 0x54, 0x55, 0x56, 0x57, 0x58, 0x59, 0x5A, 0x21, 0xFFE0, 0xFFE1, 0xFFE5, 0xFFE2, 0xFFE3, 0xC0, 0xC1, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7, 0xC8, 0xC9, 0xCA, 0xCB, 0xCC, 0xCD, 0xCE, 0xCF, 0xD0, 0xD1, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6, 0xD8, 0xD9, 0xDA, 0xDB, 0xDC, 0xDD, 0xDE, 0x178, 0x100, 0x102, 0x104, 0x106, 0x108, 0x10A, 0x10C, 0x10E, 0x110, 0x112, 0x114, 0x116, 0x118, 0x11A, 0x11C, 0x11E, 0x120, 0x122, 0x124, 0x126, 0x128, 0x12A, 0x12C, 0x12E, 0x130, 0x132, 0x134, 0x136, 0x139, 0x13B, 0x13D, 0x13F, 0x141, 0x143, 0x145, 0x147, 0x14A, 0x14C, 0x14E, 0x150, 0x152, 0x154, 0x156, 0x158, 0x15A, 0x15C, 0x15E, 0x160, 0x162, 0x164, 0x166, 0x168, 0x16A, 0x16C, 0x16E, 0x170, 0x172, 0x174, 0x176, 0x179, 0x17B, 0x17D, 0x191, 0x391, 0x392, 0x393, 0x394, 0x395, 0x396, 0x397, 0x398, 0x399, 0x39A, 0x39B, 0x39C, 0x39D, 0x39E, 0x39F, 0x3A0, 0x3A1, 0x3A3, 0x3A4, 0x3A5, 0x3A6, 0x3A7, 0x3A8, 0x3A9, 0x3AA, 0x410, 0x411, 0x412, 0x413, 0x414, 0x415, 0x416, 0x417, 0x418, 0x419, 0x41A, 0x41B, 0x41C, 0x41D, 0x41E, 0x41F, 0x420, 0x421, 0x422, 0x423, 0x424, 0x425, 0x426, 0x427, 0x428, 0x429, 0x42A, 0x42B, 0x42C, 0x42D, 0x42E, 0x42F, 0x401, 0x402, 0x403, 0x404, 0x405, 0x406, 0x407, 0x408, 0x409, 0x40A, 0x40B, 0x40C, 0x40E, 0x40F, 0x2160, 0x2161, 0x2162, 0x2163, 0x2164, 0x2165, 0x2166, 0x2167, 0x2168, 0x2169, 0x216A, 0x216B, 0x216C, 0x216D, 0x216E, 0x216F, 0xFF21, 0xFF22, 0xFF23, 0xFF24, 0xFF25, 0xFF26, 0xFF27, 0xFF28, 0xFF29, 0xFF2A, 0xFF2B, 0xFF2C, 0xFF2D, 0xFF2E, 0xFF2F, 0xFF30, 0xFF31, 0xFF32, 0xFF33, 0xFF34, 0xFF35, 0xFF36, 0xFF37, 0xFF38, 0xFF39, 0xFF3A, 0 };</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; tbl_lower[i] &amp;&amp; chr != tbl_lower[i]; i++) ;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> tbl_lower[i] ? tbl_upper[i] : chr;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af58b536abfd30f77213f4ecaf2ac52f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> get_fattime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="diskio_8c_source.html#l00035">35</a> of file <a class="el" href="diskio_8c_source.html">diskio.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> tmr;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Pack date and time into a DWORD variable */</span></div>
<div class="line">    tmr =     (((<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(<a class="code" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152">HAL_GetRTCYear</a>()-1980)) &lt;&lt; 25)</div>
<div class="line">              | ((<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="code" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff">HAL_GetRTCMon</a>() &lt;&lt; 21)</div>
<div class="line">              | ((<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)<a class="code" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638">HAL_GetRTCDay</a>() &lt;&lt; 16)</div>
<div class="line">              | (<a class="code" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(((<span class="keywordtype">unsigned</span> char) <a class="code" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243">HAL_GetRTCHour</a>()) &lt;&lt; 11)</div>
<div class="line">              | (<a class="code" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572">HAL_GetRTCMin</a>()) &lt;&lt; 5)</div>
<div class="line">              | (<a class="code" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80">HAL_GetRTCSec</a>()) &gt;&gt; 1);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (tmr);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_cgraph.png" border="0" usemap="#ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_cgraph" alt=""/></div>
<map name="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_cgraph" id="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_cgraph">
<area shape="rect" id="node3" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="142,5,269,32"/><area shape="rect" id="node5" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="143,56,268,83"/><area shape="rect" id="node7" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="144,107,267,133"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="142,157,269,184"/><area shape="rect" id="node11" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="145,208,266,235"/><area shape="rect" id="node13" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="144,259,267,285"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_icgraph.png" border="0" usemap="#ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_icgraph" alt=""/></div>
<map name="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_icgraph" id="ff_8h_af58b536abfd30f77213f4ecaf2ac52f5_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#acf2fcce74586a7af2a86d0543de6cdef" title="f_open" alt="" coords="143,5,203,32"/><area shape="rect" id="node5" href="ff_8h.html#ae3ba7b156902f7678b3344f1e5bc5e88" title="f_sync" alt="" coords="143,56,203,83"/><area shape="rect" id="node9" href="ff_8h.html#a13452975056874fbec616433db001bf9" title="f_mkdir" alt="" coords="141,107,205,133"/><area shape="rect" id="node7" href="ff_8h.html#a004f8ebf5a01c5c7065292cc4545bc38" title="f_close" alt="" coords="254,56,317,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5b5eab639d7574b5e51ae3577da95c83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> scan_files </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02242">2242</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">    <a class="code" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> fno;</div>
<div class="line">    <a class="code" href="struct_d_i_r.html">DIR</a> dir;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keywordtype">char</span> *fn;   <span class="comment">/* This function is assuming non-Unicode cfg. */</span></div>
<div class="line"><span class="preprocessor">#if _USE_LFN</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">char</span> lfn[<a class="code" href="ffconf_8h.html#a14e73a5c703a586c614b3e40b849f82c">_MAX_LFN</a> + 1];</div>
<div class="line">    fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> = lfn;</div>
<div class="line">    fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a28ec94b667e705d5eb0ec0bc7b5e32ec">lfsize</a> = <span class="keyword">sizeof</span> lfn;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">    res = <a class="code" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35">f_opendir</a>(&amp;dir, path);                       <span class="comment">/* Open the directory */</span></div>
<div class="line">    <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">        i = strlen(path);</div>
<div class="line">        <span class="keywordflow">for</span> (;;) {</div>
<div class="line">            res = <a class="code" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6">f_readdir</a>(&amp;dir, &amp;fno);                   <span class="comment">/* Read a directory item */</span></div>
<div class="line">            <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> || fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>[0] == 0) <span class="keywordflow">break</span>;  <span class="comment">/* Break on error or end of dir */</span></div>
<div class="line">            <span class="keywordflow">if</span> (fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>[0] == <span class="charliteral">&#39;.&#39;</span>) <span class="keywordflow">continue</span>;             <span class="comment">/* Ignore dot entry */</span></div>
<div class="line"><span class="preprocessor">#if _USE_LFN</span></div>
<div class="line"><span class="preprocessor"></span>            fn = *fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> ? fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> : fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            fn = fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> (fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a8d28e8b20d001f36bf6099d312384fbd">fattrib</a> &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {                    <span class="comment">/* It is a directory */</span></div>
<div class="line">                sprintf(&amp;path[i], <span class="stringliteral">&quot;/%s&quot;</span>, fn);</div>
<div class="line">                res = <a class="code" href="ff_8c.html#a5b5eab639d7574b5e51ae3577da95c83">scan_files</a>(path);</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                path[i] = 0;</div>
<div class="line">            } <span class="keywordflow">else</span> {                                       <span class="comment">/* It is a file. */</span></div>
<div class="line">                printf(<span class="stringliteral">&quot;%s/%s\n&quot;</span>, path, fn);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> res;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a5b5eab639d7574b5e51ae3577da95c83_cgraph.png" border="0" usemap="#ff_8h_a5b5eab639d7574b5e51ae3577da95c83_cgraph" alt=""/></div>
<map name="ff_8h_a5b5eab639d7574b5e51ae3577da95c83_cgraph" id="ff_8h_a5b5eab639d7574b5e51ae3577da95c83_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35" title="f_opendir" alt="" coords="261,21,336,48"/><area shape="rect" id="node5" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6" title="f_readdir" alt="" coords="263,84,334,110"/><area shape="rect" id="node7" href="ff_8c.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="133,46,213,73"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8h_a5b5eab639d7574b5e51ae3577da95c83_icgraph.png" border="0" usemap="#ff_8h_a5b5eab639d7574b5e51ae3577da95c83_icgraph" alt=""/></div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97b3d2b63ac216821c2d7a22ee0ab2b0.html">fs</a></li><li class="navelem"><a class="el" href="dir_c452826a1b8329631f1720df1edbadf7.html">FatFs</a></li><li class="navelem"><a class="el" href="ff_8h.html">ff.h</a></li>
    <li class="footer">Generated on Sun May 26 2013 18:42:38 for CLEON by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
