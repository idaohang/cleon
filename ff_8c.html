<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CLEON: fs/FatFs/ff.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CLEON
   &#160;<span id="projectnumber">Version 1</span>
   </div>
   <div id="projectbrief">Cloud-Offloaded GPS Receiver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ff_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ff.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="fs__define_8h_source.html">fs_define.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="hal__define_8h_source.html">hal_define.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ff.c:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c__incl.png" border="0" usemap="#fs_2_fat_fs_2ff_8c" alt=""/></div>
<map name="fs_2_fat_fs_2ff_8c" id="fs_2_fat_fs_2ff_8c">
<area shape="rect" id="node3" href="fs__define_8h.html" title="File system definition." alt="" coords="153,80,236,107"/><area shape="rect" id="node18" href="hal__define_8h.html" title="HAL definitions for CLEON." alt="" coords="1279,80,1369,107"/><area shape="rect" id="node5" href="diskio_8h.html" title="diskio.h" alt="" coords="5,155,72,181"/><area shape="rect" id="node7" href="integer_8h.html" title="integer.h" alt="" coords="73,229,145,256"/><area shape="rect" id="node9" href="ff_8h.html" title="ff.h" alt="" coords="147,155,185,181"/><area shape="rect" id="node12" href="ffconf_8h.html" title="ffconf.h" alt="" coords="181,229,243,256"/><area shape="rect" id="node16" href="fs__init_8h.html" title="Initializing file system." alt="" coords="261,155,328,181"/><area shape="rect" id="node40" href="hal__init_8h.html" title="Initializing HAL." alt="" coords="1287,155,1361,181"/><area shape="rect" id="node42" href="hal__wdt_8h.html" title="Watchdog timer configuration." alt="" coords="1385,155,1463,181"/><area shape="rect" id="node44" href="hal__ucs_8h.html" title="Universal clock system configuration." alt="" coords="1487,155,1565,181"/><area shape="rect" id="node46" href="hal__uart_8h.html" title="UART configuration." alt="" coords="1590,155,1668,181"/><area shape="rect" id="node48" href="hal__dma_8h.html" title="DMA configuration." alt="" coords="1693,155,1776,181"/><area shape="rect" id="node50" href="hal__rtc_8h.html" title="Initializing RTC." alt="" coords="1800,155,1872,181"/><area shape="rect" id="node52" href="hal__gpio_8h.html" title="GPIO configuration." alt="" coords="1897,155,1977,181"/><area shape="rect" id="node54" href="hal__flash_8h.html" title="FLASH configuration." alt="" coords="2002,155,2085,181"/><area shape="rect" id="node56" href="hal__timer_8h.html" title="timer configuration" alt="" coords="2110,155,2196,181"/><area shape="rect" id="node58" href="hal__adc_8h.html" title="ADC configuration." alt="" coords="2221,155,2299,181"/><area shape="rect" id="node60" href="hal__spi_8h.html" title="SPI configuration." alt="" coords="2324,155,2399,181"/><area shape="rect" id="node62" href="hal__pmm_8h.html" title="PMM configuration." alt="" coords="2423,155,2509,181"/></map>
</div>
</div>
<p><a href="ff_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a42b5140fc5e09a53c8f4cba66dc0e6c1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)&#160;&#160;&#160;((fs)-&gt;ssize)	/* Variable sector size */</td></tr>
<tr class="separator:a42b5140fc5e09a53c8f4cba66dc0e6c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458e336ac53f8249ed02d844469b7076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a458e336ac53f8249ed02d844469b7076">ENTER_FF</a>(fs)</td></tr>
<tr class="separator:a458e336ac53f8249ed02d844469b7076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e653d8ca0ae09faa49cd5b7335fea84"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res)&#160;&#160;&#160;return res</td></tr>
<tr class="separator:a7e653d8ca0ae09faa49cd5b7335fea84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e4c46636679236568cf50b5535847f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fs, res)&#160;&#160;&#160;{ fp-&gt;flag |= <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>; <a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res); }</td></tr>
<tr class="separator:a41e4c46636679236568cf50b5535847f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b2514198590e139dd064c5d534f302"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a89b2514198590e139dd064c5d534f302">IsUpper</a>(c)&#160;&#160;&#160;(((c)&gt;='A')&amp;&amp;((c)&lt;='Z'))</td></tr>
<tr class="separator:a89b2514198590e139dd064c5d534f302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9d454724926bd51a3aed589a97f08b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4a9d454724926bd51a3aed589a97f08b">IsLower</a>(c)&#160;&#160;&#160;(((c)&gt;='a')&amp;&amp;((c)&lt;='z'))</td></tr>
<tr class="separator:a4a9d454724926bd51a3aed589a97f08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65dee564f69f2ec27f25b67a348018b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a65dee564f69f2ec27f25b67a348018b9">IsDigit</a>(c)&#160;&#160;&#160;(((c)&gt;='0')&amp;&amp;((c)&lt;='9'))</td></tr>
<tr class="separator:a65dee564f69f2ec27f25b67a348018b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58d63a832a117f179e41c7373d013dd6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a58d63a832a117f179e41c7373d013dd6">IsDBCS1</a>(c)&#160;&#160;&#160;0</td></tr>
<tr class="separator:a58d63a832a117f179e41c7373d013dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a3fa880af6078ef181656c1d7d8ef1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a66a3fa880af6078ef181656c1d7d8ef1">IsDBCS2</a>(c)&#160;&#160;&#160;0</td></tr>
<tr class="separator:a66a3fa880af6078ef181656c1d7d8ef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c201f90533d5b49cd039c960327968"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>&#160;&#160;&#160;11		/* Index of name status byte in fn[] */</td></tr>
<tr class="separator:a06c201f90533d5b49cd039c960327968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92c92c3a3d6b9235ac98feeb00e565a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac92c92c3a3d6b9235ac98feeb00e565a">NS_LOSS</a>&#160;&#160;&#160;0x01	/* Out of 8.3 format */</td></tr>
<tr class="separator:ac92c92c3a3d6b9235ac98feeb00e565a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae957b8d4065ea0b3eed822aec5368d29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ae957b8d4065ea0b3eed822aec5368d29">NS_LFN</a>&#160;&#160;&#160;0x02	/* Force to create LFN entry */</td></tr>
<tr class="separator:ae957b8d4065ea0b3eed822aec5368d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0742bfc1d94f0c3baa5ede485048c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5a0742bfc1d94f0c3baa5ede485048c4">NS_LAST</a>&#160;&#160;&#160;0x04	/* Last segment */</td></tr>
<tr class="separator:a5a0742bfc1d94f0c3baa5ede485048c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a0e89b504dece19e2e4b02c83782ca2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4a0e89b504dece19e2e4b02c83782ca2">NS_BODY</a>&#160;&#160;&#160;0x08	/* Lower case flag (body) */</td></tr>
<tr class="separator:a4a0e89b504dece19e2e4b02c83782ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b7fad0942e816fdb84d869c1f7a613e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a3b7fad0942e816fdb84d869c1f7a613e">NS_EXT</a>&#160;&#160;&#160;0x10	/* Lower case flag (ext) */</td></tr>
<tr class="separator:a3b7fad0942e816fdb84d869c1f7a613e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db528782a021797b34bdc6e9e9de1c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>&#160;&#160;&#160;0x20	/* Dot entry */</td></tr>
<tr class="separator:a2db528782a021797b34bdc6e9e9de1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec02d5ae07ede32b7d74155bf0fda15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aeec02d5ae07ede32b7d74155bf0fda15">MIN_FAT16</a>&#160;&#160;&#160;4086	/* Minimum number of clusters for FAT16 */</td></tr>
<tr class="separator:aeec02d5ae07ede32b7d74155bf0fda15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483625319f3e3bd5ac6502b46c375aed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a483625319f3e3bd5ac6502b46c375aed">MIN_FAT32</a>&#160;&#160;&#160;65526	/* Minimum number of clusters for FAT32 */</td></tr>
<tr class="separator:a483625319f3e3bd5ac6502b46c375aed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f81669ee736efb2b2b49c7b0985472d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8f81669ee736efb2b2b49c7b0985472d">BS_jmpBoot</a>&#160;&#160;&#160;0	/* Jump instruction (3) */</td></tr>
<tr class="separator:a8f81669ee736efb2b2b49c7b0985472d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02a76ada191ec2dc5f8af60ff3576da7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a02a76ada191ec2dc5f8af60ff3576da7">BS_OEMName</a>&#160;&#160;&#160;3	/* OEM name (8) */</td></tr>
<tr class="separator:a02a76ada191ec2dc5f8af60ff3576da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8551844b4eb4e15aecd8cc9aa3585fa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8551844b4eb4e15aecd8cc9aa3585fa2">BPB_BytsPerSec</a>&#160;&#160;&#160;11	/* Sector size [byte] (2) */</td></tr>
<tr class="separator:a8551844b4eb4e15aecd8cc9aa3585fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab78e41c617a14b9540c0563d6b957fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aab78e41c617a14b9540c0563d6b957fa">BPB_SecPerClus</a>&#160;&#160;&#160;13	/* Cluster size [sector] (1) */</td></tr>
<tr class="separator:aab78e41c617a14b9540c0563d6b957fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ec444c8457c9bc98aa07e846f5c1b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab3ec444c8457c9bc98aa07e846f5c1b7">BPB_RsvdSecCnt</a>&#160;&#160;&#160;14	/* Size of reserved area [sector] (2) */</td></tr>
<tr class="separator:ab3ec444c8457c9bc98aa07e846f5c1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44a1e8c89ec5502595f23496d24cbf1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af44a1e8c89ec5502595f23496d24cbf1">BPB_NumFATs</a>&#160;&#160;&#160;16	/* Number of FAT copies (1) */</td></tr>
<tr class="separator:af44a1e8c89ec5502595f23496d24cbf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa667f14c87c45dc128f2ab208e92f98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aaa667f14c87c45dc128f2ab208e92f98">BPB_RootEntCnt</a>&#160;&#160;&#160;17	/* Number of root dir entries for FAT12/16 (2) */</td></tr>
<tr class="separator:aaa667f14c87c45dc128f2ab208e92f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb540eecde0f2df26fa8c7969341d68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4eb540eecde0f2df26fa8c7969341d68">BPB_TotSec16</a>&#160;&#160;&#160;19	/* Volume size [sector] (2) */</td></tr>
<tr class="separator:a4eb540eecde0f2df26fa8c7969341d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414e054c4b5ea3414ebefa3539e7e554"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a414e054c4b5ea3414ebefa3539e7e554">BPB_Media</a>&#160;&#160;&#160;21	/* Media descriptor (1) */</td></tr>
<tr class="separator:a414e054c4b5ea3414ebefa3539e7e554"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60a2f6efeb6a4c7cb2da1e5def6ca43b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a60a2f6efeb6a4c7cb2da1e5def6ca43b">BPB_FATSz16</a>&#160;&#160;&#160;22	/* FAT size [sector] (2) */</td></tr>
<tr class="separator:a60a2f6efeb6a4c7cb2da1e5def6ca43b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71bb771432ea532bc47713a028ebd76"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac71bb771432ea532bc47713a028ebd76">BPB_SecPerTrk</a>&#160;&#160;&#160;24	/* Track size [sector] (2) */</td></tr>
<tr class="separator:ac71bb771432ea532bc47713a028ebd76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c03603c3be34d4c5cc1b481b0bc6774"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a9c03603c3be34d4c5cc1b481b0bc6774">BPB_NumHeads</a>&#160;&#160;&#160;26	/* Number of heads (2) */</td></tr>
<tr class="separator:a9c03603c3be34d4c5cc1b481b0bc6774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449d4ed5c4c8105daf29aad9488277f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a449d4ed5c4c8105daf29aad9488277f7">BPB_HiddSec</a>&#160;&#160;&#160;28	/* Number of special hidden sectors (4) */</td></tr>
<tr class="separator:a449d4ed5c4c8105daf29aad9488277f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7723a9f0da553e8879d60909d85ccb7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7723a9f0da553e8879d60909d85ccb7b">BPB_TotSec32</a>&#160;&#160;&#160;32	/* Volume size [sector] (4) */</td></tr>
<tr class="separator:a7723a9f0da553e8879d60909d85ccb7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c51f7393341b839dfb241c2951f3ef4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0c51f7393341b839dfb241c2951f3ef4">BS_DrvNum</a>&#160;&#160;&#160;36	/* Physical drive number (2) */</td></tr>
<tr class="separator:a0c51f7393341b839dfb241c2951f3ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a92e790602efef4da3a2f141611ce8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a85a92e790602efef4da3a2f141611ce8">BS_BootSig</a>&#160;&#160;&#160;38	/* Extended boot signature (1) */</td></tr>
<tr class="separator:a85a92e790602efef4da3a2f141611ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383a71bda500a0fb5a37f4edd785acbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a383a71bda500a0fb5a37f4edd785acbf">BS_VolID</a>&#160;&#160;&#160;39	/* Volume serial number (4) */</td></tr>
<tr class="separator:a383a71bda500a0fb5a37f4edd785acbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28498ba4b07ff90aaa9628e81fb89d32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a28498ba4b07ff90aaa9628e81fb89d32">BS_VolLab</a>&#160;&#160;&#160;43	/* Volume label (8) */</td></tr>
<tr class="separator:a28498ba4b07ff90aaa9628e81fb89d32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2264848692d36c1b2499c9b6a10acf75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2264848692d36c1b2499c9b6a10acf75">BS_FilSysType</a>&#160;&#160;&#160;54	/* File system type (1) */</td></tr>
<tr class="separator:a2264848692d36c1b2499c9b6a10acf75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6340030dc29e7da2e9f92e472a763d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6e6340030dc29e7da2e9f92e472a763d">BPB_FATSz32</a>&#160;&#160;&#160;36	/* FAT size [sector] (4) */</td></tr>
<tr class="separator:a6e6340030dc29e7da2e9f92e472a763d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c832cd9e28f8e4fbbd45fdc86c7ebbb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6c832cd9e28f8e4fbbd45fdc86c7ebbb">BPB_ExtFlags</a>&#160;&#160;&#160;40	/* Extended flags (2) */</td></tr>
<tr class="separator:a6c832cd9e28f8e4fbbd45fdc86c7ebbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f75a149df65028e24d43727b9ffcb9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a1f75a149df65028e24d43727b9ffcb9d">BPB_FSVer</a>&#160;&#160;&#160;42	/* File system version (2) */</td></tr>
<tr class="separator:a1f75a149df65028e24d43727b9ffcb9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7add0104bd20083d6940d616faecd45a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7add0104bd20083d6940d616faecd45a">BPB_RootClus</a>&#160;&#160;&#160;44	/* Root dir first cluster (4) */</td></tr>
<tr class="separator:a7add0104bd20083d6940d616faecd45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c45669282b9ce9da5152231df9f3ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a51c45669282b9ce9da5152231df9f3ac">BPB_FSInfo</a>&#160;&#160;&#160;48	/* Offset of FSInfo sector (2) */</td></tr>
<tr class="separator:a51c45669282b9ce9da5152231df9f3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383726fb93488d41866028b4f07c90e1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a383726fb93488d41866028b4f07c90e1">BPB_BkBootSec</a>&#160;&#160;&#160;50	/* Offset of backup boot sector (2) */</td></tr>
<tr class="separator:a383726fb93488d41866028b4f07c90e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa670c7b495f5b347c442df67b188c58f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aa670c7b495f5b347c442df67b188c58f">BS_DrvNum32</a>&#160;&#160;&#160;64	/* Physical drive number (2) */</td></tr>
<tr class="separator:aa670c7b495f5b347c442df67b188c58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c4b2f802ab4bc9319e5bd840e615b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a59c4b2f802ab4bc9319e5bd840e615b8">BS_BootSig32</a>&#160;&#160;&#160;66	/* Extended boot signature (1) */</td></tr>
<tr class="separator:a59c4b2f802ab4bc9319e5bd840e615b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa3aafdcf5e83f8cb7e2bb373b13525"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abaa3aafdcf5e83f8cb7e2bb373b13525">BS_VolID32</a>&#160;&#160;&#160;67	/* Volume serial number (4) */</td></tr>
<tr class="separator:abaa3aafdcf5e83f8cb7e2bb373b13525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8241a49bce313184a58617ba1ad9e84c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8241a49bce313184a58617ba1ad9e84c">BS_VolLab32</a>&#160;&#160;&#160;71	/* Volume label (8) */</td></tr>
<tr class="separator:a8241a49bce313184a58617ba1ad9e84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d8786452966cd0ce579f2575a54a348"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a8d8786452966cd0ce579f2575a54a348">BS_FilSysType32</a>&#160;&#160;&#160;82	/* File system type (1) */</td></tr>
<tr class="separator:a8d8786452966cd0ce579f2575a54a348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318e58c1966aba52b90ab98dcb649883"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a318e58c1966aba52b90ab98dcb649883">FSI_LeadSig</a>&#160;&#160;&#160;0	/* FSI: Leading signature (4) */</td></tr>
<tr class="separator:a318e58c1966aba52b90ab98dcb649883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bac0e6ff5907873030db1d0a7c4ebef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a3bac0e6ff5907873030db1d0a7c4ebef">FSI_StrucSig</a>&#160;&#160;&#160;484	/* FSI: Structure signature (4) */</td></tr>
<tr class="separator:a3bac0e6ff5907873030db1d0a7c4ebef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab711e50459aba01b11c6b46a7cc1410b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab711e50459aba01b11c6b46a7cc1410b">FSI_Free_Count</a>&#160;&#160;&#160;488	/* FSI: Number of free clusters (4) */</td></tr>
<tr class="separator:ab711e50459aba01b11c6b46a7cc1410b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320700cedf300c9b418edf56e5e6b086"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a320700cedf300c9b418edf56e5e6b086">FSI_Nxt_Free</a>&#160;&#160;&#160;492	/* FSI: Last allocated cluster (4) */</td></tr>
<tr class="separator:a320700cedf300c9b418edf56e5e6b086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f187bf0ba891551f594af6b61f3188"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac3f187bf0ba891551f594af6b61f3188">MBR_Table</a>&#160;&#160;&#160;446	/* MBR: Partition table offset (2) */</td></tr>
<tr class="separator:ac3f187bf0ba891551f594af6b61f3188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af133060c47366e7e557d4085d931183f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af133060c47366e7e557d4085d931183f">SZ_PTE</a>&#160;&#160;&#160;16	/* MBR: Size of a partition table entry */</td></tr>
<tr class="separator:af133060c47366e7e557d4085d931183f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b810b3f3583c1eb54bd4305c0f261a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a74b810b3f3583c1eb54bd4305c0f261a">BS_55AA</a>&#160;&#160;&#160;510	/* Boot sector signature (2) */</td></tr>
<tr class="separator:a74b810b3f3583c1eb54bd4305c0f261a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa89348e9fc2de82ae9e12c661366b0e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>&#160;&#160;&#160;0	/* Short file name (11) */</td></tr>
<tr class="separator:afa89348e9fc2de82ae9e12c661366b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3233e40118ed66095f3c9545b788f8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>&#160;&#160;&#160;11	/* Attribute (1) */</td></tr>
<tr class="separator:ad3233e40118ed66095f3c9545b788f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ee1f701c2ab941862e3ce00c1c1e9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a87ee1f701c2ab941862e3ce00c1c1e9d">DIR_NTres</a>&#160;&#160;&#160;12	/* NT flag (1) */</td></tr>
<tr class="separator:a87ee1f701c2ab941862e3ce00c1c1e9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55fd459982581ae39fe3aeb242b2bc0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a55fd459982581ae39fe3aeb242b2bc0f">DIR_CrtTimeTenth</a>&#160;&#160;&#160;13	/* Created time sub-second (1) */</td></tr>
<tr class="separator:a55fd459982581ae39fe3aeb242b2bc0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fb1881ea71d860db9b8280564cb4d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>&#160;&#160;&#160;14	/* Created time (2) */</td></tr>
<tr class="separator:a47fb1881ea71d860db9b8280564cb4d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf498617bb4c7750fd738864c3c0ab5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#acf498617bb4c7750fd738864c3c0ab5a">DIR_CrtDate</a>&#160;&#160;&#160;16	/* Created date (2) */</td></tr>
<tr class="separator:acf498617bb4c7750fd738864c3c0ab5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0625d73f4683df24345f51e7a43da3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#afa0625d73f4683df24345f51e7a43da3">DIR_LstAccDate</a>&#160;&#160;&#160;18	/* Last accessed date (2) */</td></tr>
<tr class="separator:afa0625d73f4683df24345f51e7a43da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bc29c3f09e1e9c40c414f7d50d7905c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0bc29c3f09e1e9c40c414f7d50d7905c">DIR_FstClusHI</a>&#160;&#160;&#160;20	/* Higher 16-bit of first cluster (2) */</td></tr>
<tr class="separator:a0bc29c3f09e1e9c40c414f7d50d7905c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9452d336adeece2a1b0b54ab35b8a59"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>&#160;&#160;&#160;22	/* Modified time (2) */</td></tr>
<tr class="separator:ab9452d336adeece2a1b0b54ab35b8a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed17fa699511b09cbf64961373d63a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a>&#160;&#160;&#160;24	/* Modified date (2) */</td></tr>
<tr class="separator:abed17fa699511b09cbf64961373d63a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebe0e913bff75a89d38dbcb04baf5dff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aebe0e913bff75a89d38dbcb04baf5dff">DIR_FstClusLO</a>&#160;&#160;&#160;26	/* Lower 16-bit of first cluster (2) */</td></tr>
<tr class="separator:aebe0e913bff75a89d38dbcb04baf5dff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfbfa613864a02a65f0bf70ead6672c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>&#160;&#160;&#160;28	/* File size (4) */</td></tr>
<tr class="separator:abfbfa613864a02a65f0bf70ead6672c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c97d545619e6586b02b5d4f39f7be25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a6c97d545619e6586b02b5d4f39f7be25">LDIR_Ord</a>&#160;&#160;&#160;0	/* LFN entry order and <a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a> flag (1) */</td></tr>
<tr class="separator:a6c97d545619e6586b02b5d4f39f7be25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28dcd75633b49e40b42a31f0cf5f5929"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a28dcd75633b49e40b42a31f0cf5f5929">LDIR_Attr</a>&#160;&#160;&#160;11	/* LFN attribute (1) */</td></tr>
<tr class="separator:a28dcd75633b49e40b42a31f0cf5f5929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb98a052a9be81564b56854df35480a0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#acb98a052a9be81564b56854df35480a0">LDIR_Type</a>&#160;&#160;&#160;12	/* LFN type (1) */</td></tr>
<tr class="separator:acb98a052a9be81564b56854df35480a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1d529763d2d097a6d1410956c8a84f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ade1d529763d2d097a6d1410956c8a84f">LDIR_Chksum</a>&#160;&#160;&#160;13	/* Sum of corresponding SFN entry */</td></tr>
<tr class="separator:ade1d529763d2d097a6d1410956c8a84f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad73024151eff6baea94e680f7928969d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad73024151eff6baea94e680f7928969d">LDIR_FstClusLO</a>&#160;&#160;&#160;26	/* Filled by zero (0) */</td></tr>
<tr class="separator:ad73024151eff6baea94e680f7928969d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10c2f2271dbdc132f9a6b9313fc7324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>&#160;&#160;&#160;32		/* Size of a directory entry */</td></tr>
<tr class="separator:ab10c2f2271dbdc132f9a6b9313fc7324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff828b43518c49e1d637a822879b135d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a>&#160;&#160;&#160;0x40	/* Last long entry flag in LDIR_Ord */</td></tr>
<tr class="separator:aff828b43518c49e1d637a822879b135d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39f317ac33b961daaff4b8d8a7ec792"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#af39f317ac33b961daaff4b8d8a7ec792">DDE</a>&#160;&#160;&#160;0xE5	/* Deleted directory entry mark in DIR_Name[0] */</td></tr>
<tr class="separator:af39f317ac33b961daaff4b8d8a7ec792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741d6fdda5989919e0bb9811da804e56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a741d6fdda5989919e0bb9811da804e56">NDDE</a>&#160;&#160;&#160;0x05	/* Replacement of the character collides with DDE */</td></tr>
<tr class="separator:a741d6fdda5989919e0bb9811da804e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40aba328871d2be78bfdd74b390275db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>&#160;&#160;&#160;<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> sfn[12]</td></tr>
<tr class="separator:a40aba328871d2be78bfdd74b390275db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966fe5792671b39db1ccf655a8c1af8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dobj)&#160;&#160;&#160;(dobj).fn = sfn</td></tr>
<tr class="separator:a966fe5792671b39db1ccf655a8c1af8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6d6942b59f11cf285bdbfb7e38f1fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>()</td></tr>
<tr class="separator:aba6d6942b59f11cf285bdbfb7e38f1fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7519abb60fe91f6aa1d17f64fbae123a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst)</td></tr>
<tr class="separator:a7519abb60fe91f6aa1d17f64fbae123a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65611adf1626e5e08da77cd33a98dd8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst)</td></tr>
<tr class="separator:a65611adf1626e5e08da77cd33a98dd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4b6b071a8d728a88727051c12bc6d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a> (<a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> val)</td></tr>
<tr class="separator:abd4b6b071a8d728a88727051c12bc6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b5eab639d7574b5e51ae3577da95c83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5b5eab639d7574b5e51ae3577da95c83">scan_files</a> (char *path)</td></tr>
<tr class="separator:a5b5eab639d7574b5e51ae3577da95c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9e6982ad48becf73dc39c797e8569d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5f9e6982ad48becf73dc39c797e8569d">f_mount</a> (<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> vol, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *fs)</td></tr>
<tr class="separator:a5f9e6982ad48becf73dc39c797e8569d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefdef7126128d99d0b3bd82c28e54d80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aefdef7126128d99d0b3bd82c28e54d80">f_open</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> mode)</td></tr>
<tr class="separator:aefdef7126128d99d0b3bd82c28e54d80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c3dcb6869ca252888eebabe39727b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ac4c3dcb6869ca252888eebabe39727b3">f_read</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, void *buff, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btr, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *br)</td></tr>
<tr class="separator:ac4c3dcb6869ca252888eebabe39727b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ae6a4dfae8a9e308bdb2283a37ef680f2">f_write</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, const void *buff, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> btw, <a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *<a class="el" href="fs__init_8c.html#a43bf7f8524c9a39d4b8d4fa43fc51620">bw</a>)</td></tr>
<tr class="separator:ae6a4dfae8a9e308bdb2283a37ef680f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69c7246b122ba56a134939ee0eaf847"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:ad69c7246b122ba56a134939ee0eaf847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53882db20ef4323dcfd1874d7733ffc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a53882db20ef4323dcfd1874d7733ffc3">f_close</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:a53882db20ef4323dcfd1874d7733ffc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df0ac672ada972e89ef4b003e57f964"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5df0ac672ada972e89ef4b003e57f964">f_lseek</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ofs)</td></tr>
<tr class="separator:a5df0ac672ada972e89ef4b003e57f964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7b44d8858165d18ff5617d81244f35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35">f_opendir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dj, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a5a7b44d8858165d18ff5617d81244f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329a4cbc309719043e5066031fc844c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6">f_readdir</a> (<a class="el" href="struct_d_i_r.html">DIR</a> *dj, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:a329a4cbc309719043e5066031fc844c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1f60daab5c7d11170c334fb832c798"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#abe1f60daab5c7d11170c334fb832c798">f_stat</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:abe1f60daab5c7d11170c334fb832c798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a0ff39f75a87cbda9cd6ea65d83f16cec">f_getfree</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *nclst, <a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **fatfs)</td></tr>
<tr class="separator:a0ff39f75a87cbda9cd6ea65d83f16cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691a27b40c348f7c84b42e911636f38a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a691a27b40c348f7c84b42e911636f38a">f_truncate</a> (<a class="el" href="struct_f_i_l.html">FIL</a> *fp)</td></tr>
<tr class="separator:a691a27b40c348f7c84b42e911636f38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2858167fcd0bced48e9be434b3895efe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a2858167fcd0bced48e9be434b3895efe">f_unlink</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a2858167fcd0bced48e9be434b3895efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b4d38db58e89c526cfcf53200d719d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#a4b4d38db58e89c526cfcf53200d719d0">f_mkdir</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path)</td></tr>
<tr class="separator:a4b4d38db58e89c526cfcf53200d719d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab60b118acf7efa6ea19abb5db05ecccb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#ab60b118acf7efa6ea19abb5db05ecccb">f_chmod</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> value, <a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> mask)</td></tr>
<tr class="separator:ab60b118acf7efa6ea19abb5db05ecccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafaa718d1a487e12a8f0087173dba0b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aafaa718d1a487e12a8f0087173dba0b9">f_utime</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path, const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *fno)</td></tr>
<tr class="separator:aafaa718d1a487e12a8f0087173dba0b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa775b9b024acfeb3a66523cab497d142"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ff_8c.html#aa775b9b024acfeb3a66523cab497d142">f_rename</a> (const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_old, const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *path_new)</td></tr>
<tr class="separator:aa775b9b024acfeb3a66523cab497d142"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a41e4c46636679236568cf50b5535847f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ABORT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">res&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{ fp-&gt;flag |= <a class="el" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>; <a class="el" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res); }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00135">135</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a383726fb93488d41866028b4f07c90e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_BkBootSec&#160;&#160;&#160;50	/* Offset of backup boot sector (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00421">421</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8551844b4eb4e15aecd8cc9aa3585fa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_BytsPerSec&#160;&#160;&#160;11	/* Sector size [byte] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00399">399</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c832cd9e28f8e4fbbd45fdc86c7ebbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_ExtFlags&#160;&#160;&#160;40	/* Extended flags (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00417">417</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a60a2f6efeb6a4c7cb2da1e5def6ca43b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FATSz16&#160;&#160;&#160;22	/* FAT size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00406">406</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6e6340030dc29e7da2e9f92e472a763d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FATSz32&#160;&#160;&#160;36	/* FAT size [sector] (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00416">416</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a51c45669282b9ce9da5152231df9f3ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FSInfo&#160;&#160;&#160;48	/* Offset of FSInfo sector (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00420">420</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1f75a149df65028e24d43727b9ffcb9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_FSVer&#160;&#160;&#160;42	/* File system version (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00418">418</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a449d4ed5c4c8105daf29aad9488277f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_HiddSec&#160;&#160;&#160;28	/* Number of special hidden sectors (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00409">409</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a414e054c4b5ea3414ebefa3539e7e554"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_Media&#160;&#160;&#160;21	/* Media descriptor (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00405">405</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="af44a1e8c89ec5502595f23496d24cbf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_NumFATs&#160;&#160;&#160;16	/* Number of FAT copies (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00402">402</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9c03603c3be34d4c5cc1b481b0bc6774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_NumHeads&#160;&#160;&#160;26	/* Number of heads (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00408">408</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7add0104bd20083d6940d616faecd45a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RootClus&#160;&#160;&#160;44	/* Root dir first cluster (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00419">419</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaa667f14c87c45dc128f2ab208e92f98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RootEntCnt&#160;&#160;&#160;17	/* Number of root dir entries for FAT12/16 (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00403">403</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab3ec444c8457c9bc98aa07e846f5c1b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_RsvdSecCnt&#160;&#160;&#160;14	/* Size of reserved area [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00401">401</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aab78e41c617a14b9540c0563d6b957fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_SecPerClus&#160;&#160;&#160;13	/* Cluster size [sector] (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00400">400</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac71bb771432ea532bc47713a028ebd76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_SecPerTrk&#160;&#160;&#160;24	/* Track size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00407">407</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4eb540eecde0f2df26fa8c7969341d68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_TotSec16&#160;&#160;&#160;19	/* Volume size [sector] (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00404">404</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7723a9f0da553e8879d60909d85ccb7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPB_TotSec32&#160;&#160;&#160;32	/* Volume size [sector] (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00410">410</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a74b810b3f3583c1eb54bd4305c0f261a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_55AA&#160;&#160;&#160;510	/* Boot sector signature (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00433">433</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85a92e790602efef4da3a2f141611ce8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_BootSig&#160;&#160;&#160;38	/* Extended boot signature (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00412">412</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a59c4b2f802ab4bc9319e5bd840e615b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_BootSig32&#160;&#160;&#160;66	/* Extended boot signature (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00423">423</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c51f7393341b839dfb241c2951f3ef4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_DrvNum&#160;&#160;&#160;36	/* Physical drive number (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00411">411</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa670c7b495f5b347c442df67b188c58f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_DrvNum32&#160;&#160;&#160;64	/* Physical drive number (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00422">422</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2264848692d36c1b2499c9b6a10acf75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_FilSysType&#160;&#160;&#160;54	/* File system type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00415">415</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8d8786452966cd0ce579f2575a54a348"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_FilSysType32&#160;&#160;&#160;82	/* File system type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00426">426</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8f81669ee736efb2b2b49c7b0985472d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_jmpBoot&#160;&#160;&#160;0	/* Jump instruction (3) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00397">397</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a02a76ada191ec2dc5f8af60ff3576da7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_OEMName&#160;&#160;&#160;3	/* OEM name (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00398">398</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a383a71bda500a0fb5a37f4edd785acbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolID&#160;&#160;&#160;39	/* Volume serial number (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00413">413</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="abaa3aafdcf5e83f8cb7e2bb373b13525"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolID32&#160;&#160;&#160;67	/* Volume serial number (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00424">424</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28498ba4b07ff90aaa9628e81fb89d32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolLab&#160;&#160;&#160;43	/* Volume label (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00414">414</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8241a49bce313184a58617ba1ad9e84c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BS_VolLab32&#160;&#160;&#160;71	/* Volume label (8) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00425">425</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="af39f317ac33b961daaff4b8d8a7ec792"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDE&#160;&#160;&#160;0xE5	/* Deleted directory entry mark in DIR_Name[0] */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00454">454</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a40aba328871d2be78bfdd74b390275db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEF_NAMEBUF&#160;&#160;&#160;<a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> sfn[12]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00487">487</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad3233e40118ed66095f3c9545b788f8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_Attr&#160;&#160;&#160;11	/* Attribute (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00436">436</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf498617bb4c7750fd738864c3c0ab5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_CrtDate&#160;&#160;&#160;16	/* Created date (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00440">440</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a47fb1881ea71d860db9b8280564cb4d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_CrtTime&#160;&#160;&#160;14	/* Created time (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00439">439</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a55fd459982581ae39fe3aeb242b2bc0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_CrtTimeTenth&#160;&#160;&#160;13	/* Created time sub-second (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00438">438</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="abfbfa613864a02a65f0bf70ead6672c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FileSize&#160;&#160;&#160;28	/* File size (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00446">446</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0bc29c3f09e1e9c40c414f7d50d7905c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FstClusHI&#160;&#160;&#160;20	/* Higher 16-bit of first cluster (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00442">442</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aebe0e913bff75a89d38dbcb04baf5dff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_FstClusLO&#160;&#160;&#160;26	/* Lower 16-bit of first cluster (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00445">445</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa0625d73f4683df24345f51e7a43da3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_LstAccDate&#160;&#160;&#160;18	/* Last accessed date (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00441">441</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa89348e9fc2de82ae9e12c661366b0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_Name&#160;&#160;&#160;0	/* Short file name (11) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00435">435</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a87ee1f701c2ab941862e3ce00c1c1e9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_NTres&#160;&#160;&#160;12	/* NT flag (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00437">437</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="abed17fa699511b09cbf64961373d63a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_WrtDate&#160;&#160;&#160;24	/* Modified date (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00444">444</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab9452d336adeece2a1b0b54ab35b8a59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIR_WrtTime&#160;&#160;&#160;22	/* Modified time (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00443">443</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a458e336ac53f8249ed02d844469b7076"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENTER_FF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00131">131</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aba6d6942b59f11cf285bdbfb7e38f1fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_BUF</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00489">489</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab711e50459aba01b11c6b46a7cc1410b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_Free_Count&#160;&#160;&#160;488	/* FSI: Number of free clusters (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00429">429</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a318e58c1966aba52b90ab98dcb649883"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_LeadSig&#160;&#160;&#160;0	/* FSI: Leading signature (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00427">427</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a320700cedf300c9b418edf56e5e6b086"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_Nxt_Free&#160;&#160;&#160;492	/* FSI: Last allocated cluster (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00430">430</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3bac0e6ff5907873030db1d0a7c4ebef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSI_StrucSig&#160;&#160;&#160;484	/* FSI: Structure signature (4) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00428">428</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a966fe5792671b39db1ccf655a8c1af8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_BUF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dobj</td><td>)</td>
          <td>&#160;&#160;&#160;(dobj).fn = sfn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00488">488</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a58d63a832a117f179e41c7373d013dd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDBCS1</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00371">371</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a66a3fa880af6078ef181656c1d7d8ef1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDBCS2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00372">372</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a65dee564f69f2ec27f25b67a348018b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsDigit</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;(((c)&gt;='0')&amp;&amp;((c)&lt;='9'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00353">353</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4a9d454724926bd51a3aed589a97f08b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsLower</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;(((c)&gt;='a')&amp;&amp;((c)&lt;='z'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00352">352</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a89b2514198590e139dd064c5d534f302"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IsUpper</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">c</td><td>)</td>
          <td>&#160;&#160;&#160;(((c)&gt;='A')&amp;&amp;((c)&lt;='Z'))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00351">351</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28dcd75633b49e40b42a31f0cf5f5929"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Attr&#160;&#160;&#160;11	/* LFN attribute (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00448">448</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade1d529763d2d097a6d1410956c8a84f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Chksum&#160;&#160;&#160;13	/* Sum of corresponding SFN entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00450">450</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad73024151eff6baea94e680f7928969d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_FstClusLO&#160;&#160;&#160;26	/* Filled by zero (0) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00451">451</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c97d545619e6586b02b5d4f39f7be25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Ord&#160;&#160;&#160;0	/* LFN entry order and <a class="el" href="ff_8c.html#aff828b43518c49e1d637a822879b135d">LLE</a> flag (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00447">447</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="acb98a052a9be81564b56854df35480a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LDIR_Type&#160;&#160;&#160;12	/* LFN type (1) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00449">449</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7e653d8ca0ae09faa49cd5b7335fea84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEAVE_FF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">res&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;return res</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00132">132</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aff828b43518c49e1d637a822879b135d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LLE&#160;&#160;&#160;0x40	/* Last long entry flag in LDIR_Ord */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00453">453</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac3f187bf0ba891551f594af6b61f3188"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBR_Table&#160;&#160;&#160;446	/* MBR: Partition table offset (2) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00431">431</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="aeec02d5ae07ede32b7d74155bf0fda15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FAT16&#160;&#160;&#160;4086	/* Minimum number of clusters for FAT16 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00389">389</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a483625319f3e3bd5ac6502b46c375aed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FAT32&#160;&#160;&#160;65526	/* Minimum number of clusters for FAT32 */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00390">390</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a741d6fdda5989919e0bb9811da804e56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDDE&#160;&#160;&#160;0x05	/* Replacement of the character collides with DDE */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00455">455</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a06c201f90533d5b49cd039c960327968"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS&#160;&#160;&#160;11		/* Index of name status byte in fn[] */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00378">378</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4a0e89b504dece19e2e4b02c83782ca2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_BODY&#160;&#160;&#160;0x08	/* Lower case flag (body) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00382">382</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2db528782a021797b34bdc6e9e9de1c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_DOT&#160;&#160;&#160;0x20	/* Dot entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00384">384</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3b7fad0942e816fdb84d869c1f7a613e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_EXT&#160;&#160;&#160;0x10	/* Lower case flag (ext) */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00383">383</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5a0742bfc1d94f0c3baa5ede485048c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LAST&#160;&#160;&#160;0x04	/* Last segment */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00381">381</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae957b8d4065ea0b3eed822aec5368d29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LFN&#160;&#160;&#160;0x02	/* Force to create LFN entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00380">380</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac92c92c3a3d6b9235ac98feeb00e565a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NS_LOSS&#160;&#160;&#160;0x01	/* Out of 8.3 format */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00379">379</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="a42b5140fc5e09a53c8f4cba66dc0e6c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fs</td><td>)</td>
          <td>&#160;&#160;&#160;((fs)-&gt;ssize)	/* Variable sector size */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00117">117</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab10c2f2271dbdc132f9a6b9313fc7324"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SZ_DIR&#160;&#160;&#160;32		/* Size of a directory entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00452">452</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<a class="anchor" id="af133060c47366e7e557d4085d931183f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SZ_PTE&#160;&#160;&#160;16	/* MBR: Size of a partition table entry */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00432">432</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7519abb60fe91f6aa1d17f64fbae123a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clust2sect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00802">802</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        clst -= 2;</div>
<div class="line">        <span class="keywordflow">if</span> (clst &gt;= (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a> - 2)) <span class="keywordflow">return</span> 0;               <span class="comment">/* Invalid cluster# */</span></div>
<div class="line">        <span class="keywordflow">return</span> clst * fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> + fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a112ba7d33529e5c9fda3b950fff01180">database</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a7519abb60fe91f6aa1d17f64fbae123a_icgraph.png" border="0" usemap="#ff_8c_a7519abb60fe91f6aa1d17f64fbae123a_icgraph" alt=""/></div>
<map name="ff_8c_a7519abb60fe91f6aa1d17f64fbae123a_icgraph" id="ff_8c_a7519abb60fe91f6aa1d17f64fbae123a_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a9f0df1d597f92e2e6482e3a8f5c9b136" title="f_read" alt="" coords="145,5,202,32"/><area shape="rect" id="node5" href="ff_8h.html#af02e0c59a61ad5954bc9b566fe8a79b8" title="f_write" alt="" coords="144,56,203,83"/><area shape="rect" id="node7" href="ff_8h.html#ac9a2d3b1cec2ede839b1c70397e6f1f8" title="f_lseek" alt="" coords="142,107,205,133"/><area shape="rect" id="node9" href="ff_8h.html#a13452975056874fbec616433db001bf9" title="f_mkdir" alt="" coords="141,157,205,184"/><area shape="rect" id="node11" href="ff_8h.html#a0670638c6a93e143b7a8b196ab361c83" title="f_rename" alt="" coords="136,208,211,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab60b118acf7efa6ea19abb5db05ecccb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_chmod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03435">3435</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);           <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                             <span class="comment">/* Is it a root directory? */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                                <span class="comment">/* File or sub directory */</span></div>
<div class="line">                                mask &amp;= <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>|<a class="code" href="ff_8h.html#aa90c4c921c1955fd407d8bbf17f1674e">AM_HID</a>|<a class="code" href="ff_8h.html#a1f25d5c17b5a3a6397b3398add8cdc15">AM_SYS</a>|<a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;    <span class="comment">/* Valid attribute mask */</span></div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = (value &amp; mask) | (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)~mask); <span class="comment">/* Apply attribute change */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53882db20ef4323dcfd1874d7733ffc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02728">2728</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if _FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>        res = validate(fp);</div>
<div class="line">        {</div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs = fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = 0;   <span class="comment">/* Discard file object */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        res = <a class="code" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847">f_sync</a>(fp);               <span class="comment">/* Flush cached data */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {             <span class="comment">/* Decrement open counter */</span></div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs = fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>;;</div>
<div class="line">                res = validate(fp);</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        res = dec_lock(fp-&gt;lockid);     </div>
<div class="line">                        unlock_fs(fs, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                res = dec_lock(fp-&gt;lockid);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = 0;   <span class="comment">/* Discard file object */</span></div>
<div class="line">        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a53882db20ef4323dcfd1874d7733ffc3_cgraph.png" border="0" usemap="#ff_8c_a53882db20ef4323dcfd1874d7733ffc3_cgraph" alt=""/></div>
<map name="ff_8c_a53882db20ef4323dcfd1874d7733ffc3_cgraph" id="ff_8c_a53882db20ef4323dcfd1874d7733ffc3_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#ad69c7246b122ba56a134939ee0eaf847" title="f_sync" alt="" coords="118,107,178,133"/><area shape="rect" id="node5" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="231,81,311,108"/><area shape="rect" id="node7" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="227,132,314,159"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="363,5,490,32"/><area shape="rect" id="node11" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="364,56,489,83"/><area shape="rect" id="node13" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="365,107,488,133"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="363,157,490,184"/><area shape="rect" id="node17" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="366,208,487,235"/><area shape="rect" id="node19" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="365,259,488,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ff39f75a87cbda9cd6ea65d83f16cec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_getfree </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> *&#160;</td>
          <td class="paramname"><em>nclst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> **&#160;</td>
          <td class="paramname"><em>fatfs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03177">3177</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> n, clst, sect, stat;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> i;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> fat, *p;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Get drive number */</span></div>
<div class="line">        res = chk_mounted(&amp;path, fatfs, 0);</div>
<div class="line">        fs = *fatfs;</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="comment">/* If free_clust is valid, return it without full cluster scan */</span></div>
<div class="line">                <span class="keywordflow">if</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a> &lt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a> - 2) {</div>
<div class="line">                        *nclst = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <span class="comment">/* Get number of free clusters */</span></div>
<div class="line">                        fat = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a>;</div>
<div class="line">                        n = 0;</div>
<div class="line">                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a>) {</div>
<div class="line">                                clst = 2;</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        stat = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fs, clst);</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 0xFFFFFFFF) { res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 1) { res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>; <span class="keywordflow">break</span>; }</div>
<div class="line">                                        <span class="keywordflow">if</span> (stat == 0) n++;</div>
<div class="line">                                } <span class="keywordflow">while</span> (++clst &lt; fs-&gt;n_fatent);</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                clst = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>;</div>
<div class="line">                                sect = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a>;</div>
<div class="line">                                i = 0; p = 0;</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> (!i) {</div>
<div class="line">                                                res = move_window(fs, sect++);</div>
<div class="line">                                                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                                                p = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>;</div>
<div class="line">                                                i = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs);</div>
<div class="line">                                        }</div>
<div class="line">                                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a>) {</div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(p) == 0) n++;</div>
<div class="line">                                                p += 2; i -= 2;</div>
<div class="line">                                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                                <span class="keywordflow">if</span> ((<a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0x0FFFFFFF) == 0) n++;</div>
<div class="line">                                                p += 4; i -= 4;</div>
<div class="line">                                        }</div>
<div class="line">                                } <span class="keywordflow">while</span> (--clst);</div>
<div class="line">                        }</div>
<div class="line">                        fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a509defa217cfb2eb777ed3c74c4ef426">free_clust</a> = n;</div>
<div class="line">                        <span class="keywordflow">if</span> (fat == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a>) fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a66c4d8e68262d5542852e2aed6ce69b4">fsi_flag</a> = 1;</div>
<div class="line">                        *nclst = n;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a0ff39f75a87cbda9cd6ea65d83f16cec_cgraph.png" border="0" usemap="#ff_8c_a0ff39f75a87cbda9cd6ea65d83f16cec_cgraph" alt=""/></div>
<map name="ff_8c_a0ff39f75a87cbda9cd6ea65d83f16cec_cgraph" id="ff_8c_a0ff39f75a87cbda9cd6ea65d83f16cec_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="125,5,187,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5df0ac672ada972e89ef4b003e57f964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_lseek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>ofs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02897">2897</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                     <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                       <span class="comment">/* Check abort flag */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>) {        <span class="comment">/* Fast seek */</span></div>
<div class="line">                <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ofs == <a class="code" href="ff_8h.html#aee297a9011164cf485a4df2a72758b08">CREATE_LINKMAP</a>) {    <span class="comment">/* Create CLMT */</span></div>
<div class="line">                        tbl = fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>;</div>
<div class="line">                        tlen = *tbl++; ulen = 2;        <span class="comment">/* Given table size and required table size */</span></div>
<div class="line">                        cl = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;                        <span class="comment">/* Top of the chain */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cl) {</div>
<div class="line">                                <span class="keywordflow">do</span> {</div>
<div class="line">                                        <span class="comment">/* Get a fragment */</span></div>
<div class="line">                                        tcl = cl; ncl = 0; ulen += 2;   <span class="comment">/* Top, length and used items */</span></div>
<div class="line">                                        <span class="keywordflow">do</span> {</div>
<div class="line">                                                pcl = cl; ncl++;</div>
<div class="line">                                                cl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, cl);</div>
<div class="line">                                                <span class="keywordflow">if</span> (cl &lt;= 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                                <span class="keywordflow">if</span> (cl == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        } <span class="keywordflow">while</span> (cl == pcl + 1);</div>
<div class="line">                                        <span class="keywordflow">if</span> (ulen &lt;= tlen) {             <span class="comment">/* Store the length and top of the fragment */</span></div>
<div class="line">                                                *tbl++ = ncl; *tbl++ = tcl;</div>
<div class="line">                                        }</div>
<div class="line">                                } <span class="keywordflow">while</span> (cl &lt; fp-&gt;fs-&gt;n_fatent);        <span class="comment">/* Repeat until end of chain */</span></div>
<div class="line">                        }</div>
<div class="line">                        *fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a> = ulen;      <span class="comment">/* Number of items used */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ulen &lt;= tlen)</div>
<div class="line">                                *tbl = 0;               <span class="comment">/* Terminate table */</span></div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44caf56a76a86602cbdeb2c4f3d00cfad21c">FR_NOT_ENOUGH_CORE</a>;       <span class="comment">/* Given table size is smaller than required */</span></div>
<div class="line"></div>
<div class="line">                } <span class="keywordflow">else</span> {                                                <span class="comment">/* Fast seek */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ofs &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>)            <span class="comment">/* Clip offset at the file size */</span></div>
<div class="line">                                ofs = fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>;</div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> = ofs;                         <span class="comment">/* Set file pointer */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ofs) {</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clmt_clust(fp, ofs - 1);</div>
<div class="line">                                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);</div>
<div class="line">                                <span class="keywordflow">if</span> (!dsc) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                dsc += (ofs - 1) / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> - 1);</div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) &amp;&amp; dsc != fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>) {        <span class="comment">/* Refill sector cache if needed */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, dsc, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)  <span class="comment">/* Load current sector */</span></div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = dsc;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        <span class="comment">/* Normal Seek */</span></div>
<div class="line">        {</div>
<div class="line">                <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, bcs, nsect, ifptr;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ofs &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>                                     <span class="comment">/* In read-only mode, clip offset with the file size */</span></div>
<div class="line">#<span class="keywordflow">if</span> !<a class="code" href="ffconf_8h.html#afb8d35370cfe0c23832ac2d82e854ec6">_FS_READONLY</a></div>
<div class="line">                         &amp;&amp; !(fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        ) ofs = fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>;</div>
<div class="line"></div>
<div class="line">                ifptr = fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>;</div>
<div class="line">                fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> = nsect = 0;</div>
<div class="line">                if (ofs) {</div>
<div class="line">                        bcs = (<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);        <span class="comment">/* Cluster size (byte) */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (ifptr &gt; 0 &amp;&amp;</div>
<div class="line">                                (ofs - 1) / bcs &gt;= (ifptr - 1) / bcs) { <span class="comment">/* When seek to same or following cluster, */</span></div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> = (ifptr - 1) &amp; ~(bcs - 1);    <span class="comment">/* start from the current cluster */</span></div>
<div class="line">                                ofs -= fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>;</div>
<div class="line">                                clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                                                        <span class="comment">/* When seek to back cluster, */</span></div>
<div class="line">                                clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;                                              <span class="comment">/* start from the first cluster */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (clst == 0) {                                                <span class="comment">/* If no cluster chain, create a new chain */</span></div>
<div class="line">                                        clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = clst;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (clst != 0) {</div>
<div class="line">                                <span class="keywordflow">while</span> (ofs &gt; bcs) {                                             <span class="comment">/* Cluster following loop */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) {                      <span class="comment">/* Check if in write mode or not */</span></div>
<div class="line">                                                clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, clst);      <span class="comment">/* Force stretch if in write mode */</span></div>
<div class="line">                                                <span class="keywordflow">if</span> (clst == 0) {                                <span class="comment">/* When disk gets full, clip file size */</span></div>
<div class="line">                                                        ofs = bcs; <span class="keywordflow">break</span>;</div>
<div class="line">                                                }</div>
<div class="line">                                        } <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, clst);   <span class="comment">/* Follow cluster chain if not in write mode */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        <span class="keywordflow">if</span> (clst &lt;= 1 || clst &gt;= fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> += bcs;</div>
<div class="line">                                        ofs -= bcs;</div>
<div class="line">                                }</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> += ofs;</div>
<div class="line">                                <span class="keywordflow">if</span> (ofs % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)) {</div>
<div class="line">                                        nsect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, clst);       <span class="comment">/* Current sector */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (!nsect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                        nsect += ofs / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) &amp;&amp; nsect != fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>) {      <span class="comment">/* Fill sector cache if needed */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {                     <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, nsect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)        <span class="comment">/* Fill sector cache */</span></div>
<div class="line">                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = nsect;</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>) {                     <span class="comment">/* Set file change flag if the file size is extended */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>;</div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a5df0ac672ada972e89ef4b003e57f964_cgraph.png" border="0" usemap="#ff_8c_a5df0ac672ada972e89ef4b003e57f964_cgraph" alt=""/></div>
<map name="ff_8c_a5df0ac672ada972e89ef4b003e57f964_cgraph" id="ff_8c_a5df0ac672ada972e89ef4b003e57f964_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="128,5,189,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="117,56,200,83"/><area shape="rect" id="node7" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="119,107,199,133"/><area shape="rect" id="node9" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="119,157,198,184"/><area shape="rect" id="node11" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="249,157,338,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b4d38db58e89c526cfcf53200d719d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mkdir </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03362">3362</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir, n;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dsc, dcl, pcl, tim = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);                   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;               <span class="comment">/* Any object with same name is already existing */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                                <span class="comment">/* Can create a new directory */</span></div>
<div class="line">                        dcl = create_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);           <span class="comment">/* Allocate a cluster for the new directory table */</span></div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 0) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;          <span class="comment">/* No space to allocate a new cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 1) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (dcl == 0xFFFFFFFF) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)                                       <span class="comment">/* Flush FAT */</span></div>
<div class="line">                                res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* Initialize the new directory table */</span></div>
<div class="line">                                dsc = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dcl);</div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>;</div>
<div class="line">                                mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                mem_set(dir+<a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>, <span class="charliteral">&#39; &#39;</span>, 8+3);        <span class="comment">/* Create &quot;.&quot; entry */</span></div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#afa89348e9fc2de82ae9e12c661366b0e">DIR_Name</a>] = <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;</div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line">                                st_clust(dir, dcl);</div>
<div class="line">                                mem_cpy(dir+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, dir, <a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>);       <span class="comment">/* Create &quot;..&quot; entry */</span></div>
<div class="line">                                dir[33] = <span class="charliteral">&#39;.&#39;</span>; pcl = dj.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> &amp;&amp; pcl == dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aebfa6556d8f94e951a8b2c1eb740e9a1">dirbase</a>)</div>
<div class="line">                                        pcl = 0;</div>
<div class="line">                                st_clust(dir+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>, pcl);</div>
<div class="line">                                <span class="keywordflow">for</span> (n = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a>; n; n--) {        <span class="comment">/* Write dot entries and clear following sectors */</span></div>
<div class="line">                                        dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> = dsc++;</div>
<div class="line">                                        dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                        res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                                        mem_set(dir, 0, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = dir_register(&amp;dj);      <span class="comment">/* Register the object to the directoy */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dcl);                       <span class="comment">/* Could not register, remove cluster chain */</span></div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>;                         <span class="comment">/* Attribute */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);         <span class="comment">/* Created time */</span></div>
<div class="line">                                st_clust(dir, dcl);                                     <span class="comment">/* Table start cluster */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a4b4d38db58e89c526cfcf53200d719d0_cgraph.png" border="0" usemap="#ff_8c_a4b4d38db58e89c526cfcf53200d719d0_cgraph" alt=""/></div>
<map name="ff_8c_a4b4d38db58e89c526cfcf53200d719d0_cgraph" id="ff_8c_a4b4d38db58e89c526cfcf53200d719d0_cgraph">
<area shape="rect" id="node3" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="118,132,205,159"/><area shape="rect" id="node17" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="120,183,203,209"/><area shape="rect" id="node5" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="254,5,381,32"/><area shape="rect" id="node7" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="255,56,380,83"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="256,107,379,133"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="254,157,381,184"/><area shape="rect" id="node13" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="257,208,378,235"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="256,259,379,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5f9e6982ad48becf73dc39c797e8569d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02288">2288</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *rfs;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (vol &gt;= <a class="code" href="ffconf_8h.html#a366da9a40c8ceb3103a6b72ca02b9969">_VOLUMES</a>)            <span class="comment">/* Check if the drive number is valid */</span></div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca487844af77de15f6932a3b41ef3a2d65">FR_INVALID_DRIVE</a>;</div>
<div class="line">        rfs = FatFs[vol];                       <span class="comment">/* Get current fs object */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (rfs) {</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                clear_lock(rfs);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if _FS_REENTRANT                               </span><span class="comment">/* Discard sync object of the current volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (!ff_del_syncobj(rfs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                rfs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> = 0;               <span class="comment">/* Clear old fs object */</span></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fs) {</div>
<div class="line">                fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> = 0;                <span class="comment">/* Clear new fs object */</span></div>
<div class="line"><span class="preprocessor">#if _FS_REENTRANT                               </span><span class="comment">/* Create sync object for the new volume */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (!ff_cre_syncobj(vol, &amp;fs-&gt;sobj)) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line">        FatFs[vol] = fs;                        <span class="comment">/* Register new fs object */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aefdef7126128d99d0b3bd82c28e54d80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02328">2328</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line">        fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = 0;                     <span class="comment">/* Clear file object */</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>        mode &amp;= <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a> | <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a> | <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>;</div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        mode &amp;= <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>;</div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY       </span><span class="comment">/* R/W configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir)       <span class="comment">/* Current dir itself */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">else</span></div>
<div class="line">                                res = chk_lock(&amp;dj, (mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                }</div>
<div class="line">                <span class="comment">/* Create or Open a file */</span></div>
<div class="line">                <span class="keywordflow">if</span> (mode &amp; (<a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a> | <a class="code" href="ff_8h.html#a17b01553029920ac0468912b4bcb16c7">FA_OPEN_ALWAYS</a> | <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)) {</div>
<div class="line">                        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw, cl;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* No file, create new */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>)                  <span class="comment">/* There is no file to open, create a new entry */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                                        res = enq_lock() ? dir_register(&amp;dj) : <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca50dd3c3c274ccebb2cfbddde9d065bb9">FR_TOO_MANY_OPEN_FILES</a>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                        res = dir_register(&amp;dj);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                mode |= <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>;               <span class="comment">/* File is created */</span></div>
<div class="line">                                dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;                                   <span class="comment">/* New entry */</span></div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span> {                                                          <span class="comment">/* Any object is already existing */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; (<a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a> | <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) {        <span class="comment">/* Cannot overwrite it (R/O or DIR) */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> (mode &amp; <a class="code" href="ff_8h.html#a417bb1babd1785fd181a806b5613eba3">FA_CREATE_NEW</a>)       <span class="comment">/* Cannot create as new file */</span></div>
<div class="line">                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (mode &amp; <a class="code" href="ff_8h.html#afba4546b131dea4b24727fa20a80e29f">FA_CREATE_ALWAYS</a>)) {        <span class="comment">/* Truncate it if overwrite mode */</span></div>
<div class="line">                                dw = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();                                     <span class="comment">/* Created time */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#a47fb1881ea71d860db9b8280564cb4d5">DIR_CrtTime</a>, dw);</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = 0;                                      <span class="comment">/* Reset attribute */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, 0);          <span class="comment">/* size = 0 */</span></div>
<div class="line">                                cl = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);                      <span class="comment">/* Get start cluster */</span></div>
<div class="line">                                st_clust(dir, 0);                                       <span class="comment">/* cluster = 0 */</span></div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                <span class="keywordflow">if</span> (cl) {                                                       <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line">                                        dw = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a>;</div>
<div class="line">                                        res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, cl);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a10cd8b80b3b6474bf0d6432c8fb9d2d2">last_clust</a> = cl - 1;     <span class="comment">/* Reuse the cluster hole */</span></div>
<div class="line">                                                res = move_window(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dw);</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {  <span class="comment">/* Open an existing file */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Follow succeeded */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {           <span class="comment">/* It is a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        <span class="keywordflow">if</span> ((mode &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>) &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)) <span class="comment">/* R/O violation */</span></div>
<div class="line">                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        <span class="keywordflow">if</span> (mode &amp; FA_CREATE_ALWAYS)                    <span class="comment">/* Set file change flag if created or overwritten */</span></div>
<div class="line">                                mode |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#a5e11faf537370889c867127205f26ad1">dir_sect</a> = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a>;                  <span class="comment">/* Pointer to the directory entry */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#a0071755a7d2cacd3bafbb1bf2dab98a0">dir_ptr</a> = dir;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;lockid = inc_lock(&amp;dj, (mode &amp; ~<a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>) ? 1 : 0);</div>
<div class="line">                        <span class="keywordflow">if</span> (!fp-&gt;lockid) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#else                           </span><span class="comment">/* R/O configuration */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* Follow succeeded */</span></div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                             <span class="comment">/* Current dir itself */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; AM_DIR)     <span class="comment">/* It is a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> = mode;                                        <span class="comment">/* File access mode */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);      <span class="comment">/* File start cluster */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> = <a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>); <span class="comment">/* File size */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> = 0;                                           <span class="comment">/* File pointer */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = 0;</div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a> = 0;                                          <span class="comment">/* Normal seek mode */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>; fp-&gt;<a class="code" href="struct_f_i_l.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a> = dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a>;     <span class="comment">/* Validate file object */</span></div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_aefdef7126128d99d0b3bd82c28e54d80_cgraph.png" border="0" usemap="#ff_8c_aefdef7126128d99d0b3bd82c28e54d80_cgraph" alt=""/></div>
<map name="ff_8c_aefdef7126128d99d0b3bd82c28e54d80_cgraph" id="ff_8c_aefdef7126128d99d0b3bd82c28e54d80_cgraph">
<area shape="rect" id="node3" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="115,132,202,159"/><area shape="rect" id="node5" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="251,5,378,32"/><area shape="rect" id="node7" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="252,56,377,83"/><area shape="rect" id="node9" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="253,107,376,133"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="251,157,378,184"/><area shape="rect" id="node13" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="254,208,375,235"/><area shape="rect" id="node15" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="253,259,376,285"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5a7b44d8858165d18ff5617d81244f35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_opendir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03055">3055</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_f_a_t_f_s.html">FATFS</a> *fs;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!dj) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj-&gt;<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">        fs = dj-&gt;<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>;</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line">                res = follow_path(dj, path);                    <span class="comment">/* Follow the path to the directory */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Follow completed */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dj-&gt;<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>) {                                          <span class="comment">/* It is not the root dir */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dj-&gt;<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {       <span class="comment">/* The object is a directory */</span></div>
<div class="line">                                        dj-&gt;<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = ld_clust(fs, dj-&gt;<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>);</div>
<div class="line">                                } <span class="keywordflow">else</span> {                                                <span class="comment">/* The object is not a directory */</span></div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                dj-&gt;<a class="code" href="struct_d_i_r.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a> = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a7b7a6396b2c82ad46c6d8b2bf141a8dd">id</a>;</div>
<div class="line">                                res = dir_sdi(dj, 0);                   <span class="comment">/* Rewind dir */</span></div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cae4529c8cc8b59783d6efc9ba4f574532">FR_NO_PATH</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) dj-&gt;<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = 0;                   <span class="comment">/* Invalidate the dir object if function faild */</span></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                dj-&gt;<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fs, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a5a7b44d8858165d18ff5617d81244f35_icgraph.png" border="0" usemap="#ff_8c_a5a7b44d8858165d18ff5617d81244f35_icgraph" alt=""/></div>
<map name="ff_8c_a5a7b44d8858165d18ff5617d81244f35_icgraph" id="ff_8c_a5a7b44d8858165d18ff5617d81244f35_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="128,29,208,56"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac4c3dcb6869ca252888eebabe39727b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>br</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02460">2460</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect, remain;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> rcnt, cc;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> csect, *rbuff = buff;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        *br = 0;        <span class="comment">/* Clear read byte counter */</span></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                                     <span class="comment">/* Check validity */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                                       <span class="comment">/* Aborted file? */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a1f4f3530ff03abbd979b072536e72290">FA_READ</a>))                                      <span class="comment">/* Check access mode */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line">        remain = fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> - fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>;</div>
<div class="line">        <span class="keywordflow">if</span> (btr &gt; remain) btr = (<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)remain;           <span class="comment">/* Truncate btr by remaining bytes */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> ( ;  btr;                                                           <span class="comment">/* Repeat until all data read */</span></div>
<div class="line">                rbuff += rcnt, fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> += rcnt, *br += rcnt, btr -= rcnt) {</div>
<div class="line">                <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)) == 0) {             <span class="comment">/* On the sector boundary? */</span></div>
<div class="line">                        csect = (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> - 1));    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!csect) {                                           <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> == 0) {                    <span class="comment">/* On the top of the file? */</span></div>
<div class="line">                                        clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;                      <span class="comment">/* Follow from the origin */</span></div>
<div class="line">                                } <span class="keywordflow">else</span> {                                                <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>)</div>
<div class="line">                                                clst = clmt_clust(fp, fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>);        <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);      <span class="comment">/* Follow cluster chain on the FAT */</span></div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">if</span> (clst &lt; 2) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;                               <span class="comment">/* Update current cluster */</span></div>
<div class="line">                        }</div>
<div class="line">                        sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);   <span class="comment">/* Get current sector */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!sect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                        sect += csect;</div>
<div class="line">                        cc = btr / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);                          <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cc) {                                                       <span class="comment">/* Read maximum contiguous sectors directly */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a>) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line">                                        cc = fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> - csect;</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, rbuff, sect, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)cc) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY &amp;&amp; _FS_MINIMIZE &lt;= 2                  </span><span class="comment">/* Replace one of the read sectors with cached data if it contains a dirty sector */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> &amp;&amp; fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> - sect &lt; cc)</div>
<div class="line">                                        mem_cpy(rbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)), fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) &amp;&amp; fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect &lt; cc)</div>
<div class="line">                                        mem_cpy(rbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)), fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) * cc;                 <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if !_FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> != sect) {                        <span class="comment">/* Load data sector if not in cache */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_READONLY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back dirty sector cache */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, sect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>) <span class="comment">/* Fill sector cache */</span></div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = sect;</div>
<div class="line">                }</div>
<div class="line">                rcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) - ((<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));      <span class="comment">/* Get partial sector data from sector buffer */</span></div>
<div class="line">                <span class="keywordflow">if</span> (rcnt &gt; btr) rcnt = btr;</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>))             <span class="comment">/* Move sector window */</span></div>
<div class="line">                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                mem_cpy(rbuff, &amp;fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)], rcnt);      <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                mem_cpy(rbuff, &amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)], rcnt);  <span class="comment">/* Pick partial sector */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_ac4c3dcb6869ca252888eebabe39727b3_cgraph.png" border="0" usemap="#ff_8c_ac4c3dcb6869ca252888eebabe39727b3_cgraph" alt=""/></div>
<map name="ff_8c_ac4c3dcb6869ca252888eebabe39727b3_cgraph" id="ff_8c_ac4c3dcb6869ca252888eebabe39727b3_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="123,5,184,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="112,56,195,83"/><area shape="rect" id="node7" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="114,107,193,133"/><area shape="rect" id="node11" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="113,157,193,184"/><area shape="rect" id="node9" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="243,107,333,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a329a4cbc309719043e5066031fc844c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_readdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_i_r.html">DIR</a> *&#160;</td>
          <td class="paramname"><em>dj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03102">3102</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(dj);                                             <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (!fno) {</div>
<div class="line">                        res = dir_sdi(dj, 0);                   <span class="comment">/* Rewind the directory object */</span></div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(*dj);</div>
<div class="line">                        res = dir_read(dj);                             <span class="comment">/* Read an directory item */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                <span class="comment">/* Reached end of dir */</span></div>
<div class="line">                                dj-&gt;<a class="code" href="struct_d_i_r.html#a3e49e0860170e0fd9fc3e891b0d59975">sect</a> = 0;</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                             <span class="comment">/* A valid entry is found */</span></div>
<div class="line">                                get_fileinfo(dj, fno);          <span class="comment">/* Get the object information */</span></div>
<div class="line">                                res = dir_next(dj, 0);          <span class="comment">/* Increment index for next */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {</div>
<div class="line">                                        dj-&gt;<a class="code" href="struct_d_i_r.html#a3e49e0860170e0fd9fc3e891b0d59975">sect</a> = 0;</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj-&gt;<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a329a4cbc309719043e5066031fc844c6_icgraph.png" border="0" usemap="#ff_8c_a329a4cbc309719043e5066031fc844c6_icgraph" alt=""/></div>
<map name="ff_8c_a329a4cbc309719043e5066031fc844c6_icgraph" id="ff_8c_a329a4cbc309719043e5066031fc844c6_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="125,29,205,56"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa775b9b024acfeb3a66523cab497d142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path_new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03518">3518</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> djo, djn;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> buf[21], *dir;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dw;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path_old, &amp;djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                djn.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a> = djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>;</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(djo);</div>
<div class="line">                res = follow_path(&amp;djo, path_old);              <span class="comment">/* Check old object */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (djo.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;djo, 2);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                             <span class="comment">/* Old object is found */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!djo.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>) {                                         <span class="comment">/* Is root dir? */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                mem_cpy(buf, djo.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>+<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>, 21);             <span class="comment">/* Save the object information except for name */</span></div>
<div class="line">                                mem_cpy(&amp;djn, &amp;djo, <span class="keyword">sizeof</span> (<a class="code" href="struct_d_i_r.html">DIR</a>));              <span class="comment">/* Check new object */</span></div>
<div class="line">                                res = follow_path(&amp;djn, path_new);</div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca0d8f024d256df76e84782b95018a2450">FR_EXIST</a>;               <span class="comment">/* The new object name is already existing */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) {                                <span class="comment">/* Is it a valid path and no name collision? */</span></div>
<div class="line"><span class="comment">/* Start critical section that an interruption or error can cause cross-link */</span></div>
<div class="line">                                        res = dir_register(&amp;djn);                       <span class="comment">/* Register the new entry */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                dir = djn.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;                                  <span class="comment">/* Copy object information except for name */</span></div>
<div class="line">                                                mem_cpy(dir+13, buf+2, 19);</div>
<div class="line">                                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] = buf[0] | <a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;</div>
<div class="line">                                                djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                                <span class="keywordflow">if</span> (djo.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> != djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) {             <span class="comment">/* Update .. entry in the directory if needed */</span></div>
<div class="line">                                                        dw = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, ld_clust(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir));</div>
<div class="line">                                                        <span class="keywordflow">if</span> (!dw) {</div>
<div class="line">                                                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                                                res = move_window(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dw);</div>
<div class="line">                                                                dir = djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>+<a class="code" href="ff_8c.html#ab10c2f2271dbdc132f9a6b9313fc7324">SZ_DIR</a>;       <span class="comment">/* .. entry */</span></div>
<div class="line">                                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; dir[1] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line">                                                                        dw = (djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a> == <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> &amp;&amp; djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> == djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aebfa6556d8f94e951a8b2c1eb740e9a1">dirbase</a>) ? 0 : djn.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;</div>
<div class="line">                                                                        st_clust(dir, dw);</div>
<div class="line">                                                                        djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                                                }</div>
<div class="line">                                                        }</div>
<div class="line">                                                }</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                        res = dir_remove(&amp;djo);         <span class="comment">/* Remove old entry */</span></div>
<div class="line">                                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>)</div>
<div class="line">                                                                res = sync(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                                                }</div>
<div class="line">                                        }</div>
<div class="line"><span class="comment">/* End critical section */</span></div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(djo.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_aa775b9b024acfeb3a66523cab497d142_cgraph.png" border="0" usemap="#ff_8c_aa775b9b024acfeb3a66523cab497d142_cgraph" alt=""/></div>
<map name="ff_8c_aa775b9b024acfeb3a66523cab497d142_cgraph" id="ff_8c_aa775b9b024acfeb3a66523cab497d142_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="128,5,211,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abe1f60daab5c7d11170c334fb832c798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_stat </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03144">3144</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                             <span class="comment">/* Follow completed */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>)             <span class="comment">/* Found an object */</span></div>
<div class="line">                                get_fileinfo(&amp;dj, fno);</div>
<div class="line">                        <span class="keywordflow">else</span>                    <span class="comment">/* It is root dir */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad69c7246b122ba56a134939ee0eaf847"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02680">2680</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> tim;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                     <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>) {   <span class="comment">/* Has the file been written? */</span></div>
<div class="line"><span class="preprocessor">#if !_FS_TINY   </span><span class="comment">/* Write-back dirty buffer */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="comment">/* Update the directory entry */</span></div>
<div class="line">                        res = move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a5e11faf537370889c867127205f26ad1">dir_sect</a>);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                dir = fp-&gt;<a class="code" href="struct_f_i_l.html#a0071755a7d2cacd3bafbb1bf2dab98a0">dir_ptr</a>;</div>
<div class="line">                                dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] |= <a class="code" href="ff_8h.html#ae8174d00798e34e7c9e95898cb9e1a09">AM_ARC</a>;                                        <span class="comment">/* Set archive bit */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#abfbfa613864a02a65f0bf70ead6672c7">DIR_FileSize</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>);          <span class="comment">/* Update file size */</span></div>
<div class="line">                                st_clust(dir, fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>);                                      <span class="comment">/* Update start cluster */</span></div>
<div class="line">                                tim = <a class="code" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a>();                                            <span class="comment">/* Update updated time */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, tim);</div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#afa0625d73f4683df24345f51e7a43da3">DIR_LstAccDate</a>, 0);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_ad69c7246b122ba56a134939ee0eaf847_cgraph.png" border="0" usemap="#ff_8c_ad69c7246b122ba56a134939ee0eaf847_cgraph" alt=""/></div>
<map name="ff_8c_ad69c7246b122ba56a134939ee0eaf847_cgraph" id="ff_8c_ad69c7246b122ba56a134939ee0eaf847_cgraph">
<area shape="rect" id="node3" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="119,81,199,108"/><area shape="rect" id="node5" href="diskio_8c.html#af58b536abfd30f77213f4ecaf2ac52f5" title="get_fattime" alt="" coords="115,132,202,159"/><area shape="rect" id="node7" href="hal__rtc_8c.html#a89f7b16ba53fa62655fc288efa7df152" title="HAL_GetRTCYear" alt="" coords="251,5,378,32"/><area shape="rect" id="node9" href="hal__rtc_8c.html#ad17a64d20a2b6d76a9278afe410613ff" title="HAL_GetRTCMon" alt="" coords="252,56,377,83"/><area shape="rect" id="node11" href="hal__rtc_8c.html#a54683fb15429c4db352709dac1ade638" title="HAL_GetRTCDay" alt="" coords="253,107,376,133"/><area shape="rect" id="node13" href="hal__rtc_8c.html#a5283fa74376946ca4ad839ada2685243" title="HAL_GetRTCHour" alt="" coords="251,157,378,184"/><area shape="rect" id="node15" href="hal__rtc_8c.html#aaa5ba6933d7030858223c4af717fa572" title="HAL_GetRTCMin" alt="" coords="254,208,375,235"/><area shape="rect" id="node17" href="hal__rtc_8c.html#a879ba4469852870b38f1ce0ced55cd80" title="HAL_GetRTCSec" alt="" coords="253,259,376,285"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_ad69c7246b122ba56a134939ee0eaf847_icgraph.png" border="0" usemap="#ff_8c_ad69c7246b122ba56a134939ee0eaf847_icgraph" alt=""/></div>
<map name="ff_8c_ad69c7246b122ba56a134939ee0eaf847_icgraph" id="ff_8c_ad69c7246b122ba56a134939ee0eaf847_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a004f8ebf5a01c5c7065292cc4545bc38" title="f_close" alt="" coords="115,5,178,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a691a27b40c348f7c84b42e911636f38a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03244">3244</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> ncl;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca3dec4eba481cdf5e99d7cd6009e6dcf8">FR_INVALID_OBJECT</a>;</div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                             <span class="comment">/* Check validity of the object */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>) {                     <span class="comment">/* Check abort flag */</span></div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                        <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>))             <span class="comment">/* Check access mode */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>) {</div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>;   <span class="comment">/* Set file size to current R/W point */</span></div>
<div class="line">                        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> == 0) {    <span class="comment">/* When set file size to zero, remove entire cluster chain */</span></div>
<div class="line">                                res = remove_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = 0;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                <span class="comment">/* When truncate a part of the file, remove remaining clusters */</span></div>
<div class="line">                                ncl = <a class="code" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b">get_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (ncl == 0xFFFFFFFF) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (ncl == 1) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; ncl &lt; fp-&gt;fs-&gt;n_fatent) {</div>
<div class="line">                                        res = <a class="code" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7">put_fat</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>, 0x0FFFFFFF);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = remove_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, ncl);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> |= <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a691a27b40c348f7c84b42e911636f38a_cgraph.png" border="0" usemap="#ff_8c_a691a27b40c348f7c84b42e911636f38a_cgraph" alt=""/></div>
<map name="ff_8c_a691a27b40c348f7c84b42e911636f38a_cgraph" id="ff_8c_a691a27b40c348f7c84b42e911636f38a_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a65611adf1626e5e08da77cd33a98dd8b" title="get_fat" alt="" coords="133,5,195,32"/><area shape="rect" id="node5" href="ff_8c.html#abd4b6b071a8d728a88727051c12bc6d7" title="put_fat" alt="" coords="133,56,195,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2858167fcd0bced48e9be434b3895efe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_unlink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03294">3294</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj, sdj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> dclst;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);           <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;                  <span class="comment">/* Cannot remove dot entry */</span></div>
<div class="line"><span class="preprocessor">#if _FS_LOCK</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = chk_lock(&amp;dj, 2);       <span class="comment">/* Cannot remove open file */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {                                     <span class="comment">/* The object is accessible */</span></div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {</div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;          <span class="comment">/* Cannot remove the start directory */</span></div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">if</span> (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#add6d85d1e7a02b4f6188783ef91a5f1e">AM_RDO</a>)</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;                <span class="comment">/* Cannot remove R/O object */</span></div>
<div class="line">                        }</div>
<div class="line">                        dclst = ld_clust(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dir);</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dir[<a class="code" href="ff_8c.html#ad3233e40118ed66095f3c9545b788f8a">DIR_Attr</a>] &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>)) { <span class="comment">/* Is it a sub-dir? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (dclst &lt; 2) {</div>
<div class="line">                                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                                } <span class="keywordflow">else</span> {</div>
<div class="line">                                        mem_cpy(&amp;sdj, &amp;dj, <span class="keyword">sizeof</span> (<a class="code" href="struct_d_i_r.html">DIR</a>));       <span class="comment">/* Check if the sub-dir is empty or not */</span></div>
<div class="line">                                        sdj.<a class="code" href="struct_d_i_r.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = dclst;</div>
<div class="line">                                        res = dir_sdi(&amp;sdj, 2);         <span class="comment">/* Exclude dot entries */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                                res = dir_read(&amp;sdj);</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>                <span class="comment">/* Not empty dir */</span></div>
<div class="line">#<span class="keywordflow">if</span> <a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a></div>
<div class="line">                                                || dclst == dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a2ff1c337066d051b15eaf9cc93279347">cdir</a> <span class="comment">/* Current dir */</span></div>
<div class="line">#endif</div>
<div class="line">                                                ) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>;</div>
<div class="line">                                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97da8f98fc2e66d8fa7847f9ebb19b8c">FR_NO_FILE</a>) res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>;     <span class="comment">/* Empty */</span></div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                res = dir_remove(&amp;dj);          <span class="comment">/* Remove the directory entry */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                                        <span class="keywordflow">if</span> (dclst)                              <span class="comment">/* Remove the cluster chain if exist */</span></div>
<div class="line">                                                res = remove_chain(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, dclst);</div>
<div class="line">                                        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                                }</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aafaa718d1a487e12a8f0087173dba0b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_utime </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ff_8h.html#a03bdb8ce5895c7e261aadc2529637546">TCHAR</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> *&#160;</td>
          <td class="paramname"><em>fno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l03477">3477</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="struct_d_i_r.html">DIR</a> dj;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *dir;</div>
<div class="line">        <a class="code" href="ff_8c.html#a40aba328871d2be78bfdd74b390275db">DEF_NAMEBUF</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        res = chk_mounted(&amp;path, &amp;dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                <a class="code" href="ff_8c.html#a966fe5792671b39db1ccf655a8c1af8d">INIT_BUF</a>(dj);</div>
<div class="line">                res = follow_path(&amp;dj, path);   <span class="comment">/* Follow the file path */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#aba6d6942b59f11cf285bdbfb7e38f1fa">FREE_BUF</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="ffconf_8h.html#a52faf11025401372f71e9d81905b7af4">_FS_RPATH</a> &amp;&amp; res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> &amp;&amp; (dj.<a class="code" href="struct_d_i_r.html#a34e961714af3bc25c08d5832cca23204">fn</a>[<a class="code" href="ff_8c.html#a06c201f90533d5b49cd039c960327968">NS</a>] &amp; <a class="code" href="ff_8c.html#a2db528782a021797b34bdc6e9e9de1c3">NS_DOT</a>))</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">                        dir = dj.<a class="code" href="struct_d_i_r.html#a30fe34a14a6efb4c9c04a522f6cf3378">dir</a>;</div>
<div class="line">                        <span class="keywordflow">if</span> (!dir) {                                     <span class="comment">/* Root directory */</span></div>
<div class="line">                                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca83e45a4b579558c57192c0a391b9bb45">FR_INVALID_NAME</a>;</div>
<div class="line">                        } <span class="keywordflow">else</span> {                                        <span class="comment">/* File or sub-directory */</span></div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#ab9452d336adeece2a1b0b54ab35b8a59">DIR_WrtTime</a>, fno-&gt;<a class="code" href="struct_f_i_l_i_n_f_o.html#adb685b4c58c087d1cd790afb710001cb">ftime</a>);</div>
<div class="line">                                <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(dir+<a class="code" href="ff_8c.html#abed17fa699511b09cbf64961373d63a4">DIR_WrtDate</a>, fno-&gt;<a class="code" href="struct_f_i_l_i_n_f_o.html#af49edeb97b10af8854cc15a05947a7d4">fdate</a>);</div>
<div class="line">                                dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                                res = sync(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);</div>
<div class="line">                        }</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(dj.<a class="code" href="struct_d_i_r.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6a4dfae8a9e308bdb2283a37ef680f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> f_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_i_l.html">FIL</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>&#160;</td>
          <td class="paramname"><em>btw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> *&#160;</td>
          <td class="paramname"><em>bw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02561">2561</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">        <a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> clst, sect;</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wcnt, cc;</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *wbuff = buff;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> csect;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        *<a class="code" href="app__log_8c.html#a43bf7f8524c9a39d4b8d4fa43fc51620">bw</a> = 0;        <span class="comment">/* Clear write byte counter */</span></div>
<div class="line"></div>
<div class="line">        res = validate(fp);                                             <span class="comment">/* Check validity */</span></div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, res);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#ad3b47fe8126573b17752a9a242b76b9a">FA__ERROR</a>)                               <span class="comment">/* Aborted file? */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (!(fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#afa366963220c89b882c0361794020c14">FA_WRITE</a>))                             <span class="comment">/* Check access mode */</span></div>
<div class="line">                <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca897e9f2dd7629a80f48af242d8bc1a3d">FR_DENIED</a>);</div>
<div class="line">        <span class="keywordflow">if</span> ((<a class="code" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>)(fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> + btw) &lt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>) btw = 0;      <span class="comment">/* File size cannot reach 4GB */</span></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> ( ;  btw;                                                   <span class="comment">/* Repeat until all data written */</span></div>
<div class="line">                wbuff += wcnt, fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> += wcnt, *<a class="code" href="app__log_8c.html#a43bf7f8524c9a39d4b8d4fa43fc51620">bw</a> += wcnt, btw -= wcnt) {</div>
<div class="line">                <span class="keywordflow">if</span> ((fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)) == 0) {     <span class="comment">/* On the sector boundary? */</span></div>
<div class="line">                        csect = (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) &amp; (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> - 1));    <span class="comment">/* Sector offset in the cluster */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!csect) {                                   <span class="comment">/* On the cluster boundary? */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> == 0) {            <span class="comment">/* On the top of the file? */</span></div>
<div class="line">                                        clst = fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a>;              <span class="comment">/* Follow from the origin */</span></div>
<div class="line">                                        <span class="keywordflow">if</span> (clst == 0)                  <span class="comment">/* When no cluster is allocated, */</span></div>
<div class="line">                                                fp-&gt;<a class="code" href="struct_f_i_l.html#ad5d52f3fde971d2a05ff777a6243c252">sclust</a> = clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0);    <span class="comment">/* Create a new cluster chain */</span></div>
<div class="line">                                } <span class="keywordflow">else</span> {                                        <span class="comment">/* Middle or end of the file */</span></div>
<div class="line"><span class="preprocessor">#if _USE_FASTSEEK</span></div>
<div class="line"><span class="preprocessor"></span>                                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a807e335a4d92639456ac4273cb0de4cb">cltbl</a>)</div>
<div class="line">                                                clst = clmt_clust(fp, fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>);        <span class="comment">/* Get cluster# from the CLMT */</span></div>
<div class="line">                                        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                                clst = create_chain(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>); <span class="comment">/* Follow or stretch cluster chain on the FAT */</span></div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0) <span class="keywordflow">break</span>;           <span class="comment">/* Could not allocate a new cluster (disk full) */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 1) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                                <span class="keywordflow">if</span> (clst == 0xFFFFFFFF) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a> = clst;                       <span class="comment">/* Update current cluster */</span></div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> == fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> &amp;&amp; move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0))     <span class="comment">/* Write-back sector cache */</span></div>
<div class="line">                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp; <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>) {             <span class="comment">/* Write-back sector cache */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        sect = <a class="code" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a">clust2sect</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#ac134c1b4645be670eb5207032e714616">clust</a>);   <span class="comment">/* Get current sector */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (!sect) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>);</div>
<div class="line">                        sect += csect;</div>
<div class="line">                        cc = btw / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>);                  <span class="comment">/* When remaining bytes &gt;= sector size, */</span></div>
<div class="line">                        <span class="keywordflow">if</span> (cc) {                                               <span class="comment">/* Write maximum contiguous sectors directly */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (csect + cc &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a>) <span class="comment">/* Clip at cluster boundary */</span></div>
<div class="line">                                        cc = fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#ace95d33f1aefff4c3e821cf8eac7ec3e">csize</a> - csect;</div>
<div class="line">                                <span class="keywordflow">if</span> (<a class="code" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190">disk_write</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, wbuff, sect, (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)cc) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> - sect &lt; cc) {      <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line">                                        mem_cpy(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>, wbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)), <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 0;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect &lt; cc) { <span class="comment">/* Refill sector cache if it gets invalidated by the direct write */</span></div>
<div class="line">                                        mem_cpy(fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, wbuff + ((fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> - sect) * <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)), <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));</div>
<div class="line">                                        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> &amp;= ~<a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line">                                }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                                wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) * cc;         <span class="comment">/* Number of bytes transferred */</span></div>
<div class="line">                                <span class="keywordflow">continue</span>;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> &gt;= fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>) {    <span class="comment">/* Avoid silly cache filling at growing edge */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, 0)) <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                                fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#a285dc1de6874bb5f0c41c328c9433e14">winsect</a> = sect;</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> != sect) {                <span class="comment">/* Fill sector cache with file data */</span></div>
<div class="line">                                <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> &lt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> &amp;&amp;</div>
<div class="line">                                        <a class="code" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50">disk_read</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#af46443bf86aaaff8d411814ed640e831">drv</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>, sect, 1) != <a class="code" href="diskio_8h.html#aacdfef1dad6565f65c26d12fe0ea4b2ba2ea4b6ef3fffc17dd1d38ab5c2837737">RES_OK</a>)</div>
<div class="line">                                                <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                        fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a> = sect;</div>
<div class="line">                }</div>
<div class="line">                wcnt = <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>) - ((<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>));<span class="comment">/* Put partial sector into file I/O buffer */</span></div>
<div class="line">                <span class="keywordflow">if</span> (wcnt &gt; btw) wcnt = btw;</div>
<div class="line"><span class="preprocessor">#if _FS_TINY</span></div>
<div class="line"><span class="preprocessor"></span>                <span class="keywordflow">if</span> (move_window(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, fp-&gt;<a class="code" href="struct_f_i_l.html#a272171f74215002aba31a89428f1d290">dsect</a>))     <span class="comment">/* Move sector window */</span></div>
<div class="line">                        <a class="code" href="ff_8c.html#a41e4c46636679236568cf50b5535847f">ABORT</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca97dee4a6b485dc8f91f37486092dfe34">FR_DISK_ERR</a>);</div>
<div class="line">                mem_cpy(&amp;fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)], wbuff, wcnt);      <span class="comment">/* Fit partial sector */</span></div>
<div class="line">                fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>                mem_cpy(&amp;fp-&gt;<a class="code" href="struct_f_i_l.html#a1602edc1ba9d9ae2b583cf55f3492325">buf</a>[fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>)], wbuff, wcnt);  <span class="comment">/* Fit partial sector */</span></div>
<div class="line">                fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> |= <a class="code" href="ff_8h.html#a5b2962e3616a1e9eb709d95f4c75c67c">FA__DIRTY</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a> &gt; fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a>) fp-&gt;<a class="code" href="struct_f_i_l.html#af70a0afd16367837984d6205cbfca308">fsize</a> = fp-&gt;<a class="code" href="struct_f_i_l.html#a0f65af32a2d036c560e66177961b9b22">fptr</a>; <span class="comment">/* Update file size if needed */</span></div>
<div class="line">        fp-&gt;<a class="code" href="struct_f_i_l.html#abb2c49aaa8df55e1e1d8cb0c5e04a3bf">flag</a> |= <a class="code" href="ff_8h.html#ac4b7d5223f84df91c306ffbff536fae4">FA__WRITTEN</a>;                                                <span class="comment">/* Set file change flag */</span></div>
<div class="line"></div>
<div class="line">        <a class="code" href="ff_8c.html#a7e653d8ca0ae09faa49cd5b7335fea84">LEAVE_FF</a>(fp-&gt;<a class="code" href="struct_f_i_l.html#ae363a794e38f3a9aa1d55b8e3c7fcee7">fs</a>, <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2_cgraph.png" border="0" usemap="#ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2_cgraph" alt=""/></div>
<map name="ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2_cgraph" id="ff_8c_ae6a4dfae8a9e308bdb2283a37ef680f2_cgraph">
<area shape="rect" id="node3" href="diskio_8h.html#a44e59653a39c1368ee0a8bfa4de78190" title="disk_write" alt="" coords="113,5,193,32"/><area shape="rect" id="node5" href="ff_8c.html#a7519abb60fe91f6aa1d17f64fbae123a" title="clust2sect" alt="" coords="112,56,195,83"/><area shape="rect" id="node7" href="diskio_8c.html#a42043c0f462756dbdf1f3bd1bdb5fa50" title="disk_read" alt="" coords="114,107,193,133"/><area shape="rect" id="node9" href="diskio_8c.html#a21ad8e9a107ea2000705a3edfebaaa2d" title="disk_status" alt="" coords="243,107,333,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a65611adf1626e5e08da77cd33a98dd8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a> get_fat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00820">820</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> wc, bc;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *p;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (clst &lt; 2 || clst &gt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>)   <span class="comment">/* Check range */</span></div>
<div class="line">                <span class="keywordflow">return</span> 1;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a> :</div>
<div class="line">                bc = (<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)clst; bc += bc / 2;</div>
<div class="line">                <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)))) <span class="keywordflow">break</span>;</div>
<div class="line">                wc = fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)]; bc++;</div>
<div class="line">                <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)))) <span class="keywordflow">break</span>;</div>
<div class="line">                wc |= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)] &lt;&lt; 8;</div>
<div class="line">                <span class="keywordflow">return</span> (clst &amp; 1) ? (wc &gt;&gt; 4) : (wc &amp; 0xFFF);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a> :</div>
<div class="line">                <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 2)))) <span class="keywordflow">break</span>;</div>
<div class="line">                p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[clst * 2 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a398519bb08da6457e62567d1f0b567e3">LD_WORD</a>(p);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> :</div>
<div class="line">                <span class="keywordflow">if</span> (move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 4)))) <span class="keywordflow">break</span>;</div>
<div class="line">                p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[clst * 4 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0x0FFFFFFF;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0xFFFFFFFF;      <span class="comment">/* An error occurred at the disk I/O layer */</span></div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a65611adf1626e5e08da77cd33a98dd8b_icgraph.png" border="0" usemap="#ff_8c_a65611adf1626e5e08da77cd33a98dd8b_icgraph" alt=""/></div>
<map name="ff_8c_a65611adf1626e5e08da77cd33a98dd8b_icgraph" id="ff_8c_a65611adf1626e5e08da77cd33a98dd8b_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a9f0df1d597f92e2e6482e3a8f5c9b136" title="f_read" alt="" coords="126,5,183,32"/><area shape="rect" id="node5" href="ff_8h.html#ac9a2d3b1cec2ede839b1c70397e6f1f8" title="f_lseek" alt="" coords="123,56,186,83"/><area shape="rect" id="node7" href="ff_8h.html#a08f50eeafdd73abb2f4ad033ce6cabb0" title="f_getfree" alt="" coords="119,107,190,133"/><area shape="rect" id="node9" href="ff_8h.html#a29d002c2c9b726151b9c1a4ad742c41d" title="f_truncate" alt="" coords="115,157,194,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abd4b6b071a8d728a88727051c12bc6d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> put_fat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_f_a_t_f_s.html">FATFS</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>clst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="integer_8h.html#ad342ac907eb044443153a22f964bf0af">DWORD</a>&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l00863">863</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a> bc;</div>
<div class="line">        <a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a> *p;</div>
<div class="line">        <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (clst &lt; 2 || clst &gt;= fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a388eb0fa0f3f1449a6ab88c6674e16fc">n_fatent</a>) { <span class="comment">/* Check range */</span></div>
<div class="line">                res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line"></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="keywordflow">switch</span> (fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a3630ef0b29c45ef8e0c1de639efab754">fs_type</a>) {</div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#aab755aa1b4f81f4aabee4a5d4738cfb0">FS_FAT12</a> :</div>
<div class="line">                        bc = (<a class="code" href="integer_8h.html#a36cb3b01d81ffd844bbbfb54003e06ec">UINT</a>)clst; bc += bc / 2;</div>
<div class="line">                        res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)));</div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                        *p = (clst &amp; 1) ? ((*p &amp; 0x0F) | ((<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)val &lt;&lt; 4)) : (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)val;</div>
<div class="line">                        bc++;</div>
<div class="line">                        fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">                        res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (bc / <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)));</div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[bc % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                        *p = (clst &amp; 1) ? (<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val &gt;&gt; 4) : ((*p &amp; 0xF0) | ((<a class="code" href="integer_8h.html#a4ae1dab0fb4b072a66584546209e7d58">BYTE</a>)(val &gt;&gt; 8) &amp; 0x0F));</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#a7ef90a36d99edfc0138a2155a17a79b9">FS_FAT16</a> :</div>
<div class="line">                        res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 2)));</div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[clst * 2 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                        <a class="code" href="ff_8h.html#a95ceb4c25b216e71baa7102939edfd0d">ST_WORD</a>(p, (<a class="code" href="integer_8h.html#a197942eefa7db30960ae396d68339b97">WORD</a>)val);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="ff_8h.html#ac63e0796095a789cefdbc3c3c676c9ce">FS_FAT32</a> :</div>
<div class="line">                        res = move_window(fs, fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#a74e60540a346de6eb9f0c13d6203efa1">fatbase</a> + (clst / (<a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs) / 4)));</div>
<div class="line">                        <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                        p = &amp;fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#aabf9e848c88b78e22df6e09a0626e6f5">win</a>[clst * 4 % <a class="code" href="ff_8c.html#a42b5140fc5e09a53c8f4cba66dc0e6c1">SS</a>(fs)];</div>
<div class="line">                        val |= <a class="code" href="ff_8h.html#a4690304ddc975516f7dc02575c96e34e">LD_DWORD</a>(p) &amp; 0xF0000000;</div>
<div class="line">                        <a class="code" href="ff_8h.html#abf5aba973d95ac5843b80aa7379cdd66">ST_DWORD</a>(p, val);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">default</span> :</div>
<div class="line">                        res = <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44cab6c9903af6e9bffbb7a288705f4a6a76">FR_INT_ERR</a>;</div>
<div class="line">                }</div>
<div class="line">                fs-&gt;<a class="code" href="struct_f_a_t_f_s.html#adb3983f8d19ef9879f30d04b076e9ff2">wflag</a> = 1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> res;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_abd4b6b071a8d728a88727051c12bc6d7_icgraph.png" border="0" usemap="#ff_8c_abd4b6b071a8d728a88727051c12bc6d7_icgraph" alt=""/></div>
<map name="ff_8c_abd4b6b071a8d728a88727051c12bc6d7_icgraph" id="ff_8c_abd4b6b071a8d728a88727051c12bc6d7_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a29d002c2c9b726151b9c1a4ad742c41d" title="f_truncate" alt="" coords="115,5,194,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5b5eab639d7574b5e51ae3577da95c83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> scan_files </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ff_8c_source.html#l02242">2242</a> of file <a class="el" href="ff_8c_source.html">ff.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44c">FRESULT</a> res;</div>
<div class="line">    <a class="code" href="struct_f_i_l_i_n_f_o.html">FILINFO</a> fno;</div>
<div class="line">    <a class="code" href="struct_d_i_r.html">DIR</a> dir;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keywordtype">char</span> *fn;   <span class="comment">/* This function is assuming non-Unicode cfg. */</span></div>
<div class="line"><span class="preprocessor">#if _USE_LFN</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">char</span> lfn[<a class="code" href="ffconf_8h.html#a14e73a5c703a586c614b3e40b849f82c">_MAX_LFN</a> + 1];</div>
<div class="line">    fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> = lfn;</div>
<div class="line">    fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a28ec94b667e705d5eb0ec0bc7b5e32ec">lfsize</a> = <span class="keyword">sizeof</span> lfn;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">    res = <a class="code" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35">f_opendir</a>(&amp;dir, path);                       <span class="comment">/* Open the directory */</span></div>
<div class="line">    <span class="keywordflow">if</span> (res == <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) {</div>
<div class="line">        i = strlen(path);</div>
<div class="line">        <span class="keywordflow">for</span> (;;) {</div>
<div class="line">            res = <a class="code" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6">f_readdir</a>(&amp;dir, &amp;fno);                   <span class="comment">/* Read a directory item */</span></div>
<div class="line">            <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a> || fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>[0] == 0) <span class="keywordflow">break</span>;  <span class="comment">/* Break on error or end of dir */</span></div>
<div class="line">            <span class="keywordflow">if</span> (fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>[0] == <span class="charliteral">&#39;.&#39;</span>) <span class="keywordflow">continue</span>;             <span class="comment">/* Ignore dot entry */</span></div>
<div class="line"><span class="preprocessor">#if _USE_LFN</span></div>
<div class="line"><span class="preprocessor"></span>            fn = *fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> ? fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#ac40e23991a0616f2573d7856cdbba9ea">lfname</a> : fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>            fn = fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a7c33845207b44ca3b394052ad6724e72">fname</a>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">if</span> (fno.<a class="code" href="struct_f_i_l_i_n_f_o.html#a8d28e8b20d001f36bf6099d312384fbd">fattrib</a> &amp; <a class="code" href="ff_8h.html#a3a9db44e978ed6c13b641e092d4cd7d3">AM_DIR</a>) {                    <span class="comment">/* It is a directory */</span></div>
<div class="line">                sprintf(&amp;path[i], <span class="stringliteral">&quot;/%s&quot;</span>, fn);</div>
<div class="line">                res = <a class="code" href="ff_8c.html#a5b5eab639d7574b5e51ae3577da95c83">scan_files</a>(path);</div>
<div class="line">                <span class="keywordflow">if</span> (res != <a class="code" href="ff_8h.html#a49d0171ecbd362cda5680a0d360db44ca62fce5cd9df008f8fc85f99706bda5f1">FR_OK</a>) <span class="keywordflow">break</span>;</div>
<div class="line">                path[i] = 0;</div>
<div class="line">            } <span class="keywordflow">else</span> {                                       <span class="comment">/* It is a file. */</span></div>
<div class="line">                printf(<span class="stringliteral">&quot;%s/%s\n&quot;</span>, path, fn);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> res;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_cgraph.png" border="0" usemap="#ff_8c_a5b5eab639d7574b5e51ae3577da95c83_cgraph" alt=""/></div>
<map name="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_cgraph" id="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_cgraph">
<area shape="rect" id="node3" href="ff_8c.html#a5a7b44d8858165d18ff5617d81244f35" title="f_opendir" alt="" coords="133,5,208,32"/><area shape="rect" id="node5" href="ff_8c.html#a329a4cbc309719043e5066031fc844c6" title="f_readdir" alt="" coords="135,56,206,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_icgraph.png" border="0" usemap="#ff_8c_a5b5eab639d7574b5e51ae3577da95c83_icgraph" alt=""/></div>
<map name="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_icgraph" id="ff_8c_a5b5eab639d7574b5e51ae3577da95c83_icgraph">
<area shape="rect" id="node3" href="ff_8h.html#a5b5eab639d7574b5e51ae3577da95c83" title="scan_files" alt="" coords="133,29,213,56"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97b3d2b63ac216821c2d7a22ee0ab2b0.html">fs</a></li><li class="navelem"><a class="el" href="dir_c452826a1b8329631f1720df1edbadf7.html">FatFs</a></li><li class="navelem"><a class="el" href="ff_8c.html">ff.c</a></li>
    <li class="footer">Generated on Tue May 28 2013 15:08:38 for CLEON by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
